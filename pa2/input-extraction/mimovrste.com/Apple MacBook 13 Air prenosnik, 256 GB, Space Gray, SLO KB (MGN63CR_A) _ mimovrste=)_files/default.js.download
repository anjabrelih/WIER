;try{var runDataGatherer={gathererScriptId:"",gathererLogLevel:"",event:{},nativeEvent:{},element:{},attributes:{},lock:!1,dataPoints:[],spyReportingToGaCallbacks:[],pushStateCallbacks:[],plugin:{},getConfig:function(){try{var t={"script_id":"default","running":!0,"run_conditions":{"expressions":["!(new RegExp('AdsBot-Google')).test(navigator.userAgent);","!(new RegExp('Googlebot')).test(navigator.userAgent);","!(new RegExp('YandexMobileBot')).test(navigator.userAgent);","!(new RegExp('screenshot-generator')).test(navigator.userAgent);"]},"declarations":"runDataGatherer.getHashedEmail = function(el) {var MD5 = function(string) {function RotateLeft(lValue, iShiftBits) {return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));}function AddUnsigned(lX, lY) {var lX4, lY4, lX8, lY8, lResult;lX8 = (lX & 0x80000000);lY8 = (lY & 0x80000000);lX4 = (lX & 0x40000000);lY4 = (lY & 0x40000000);lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);if (lX4 & lY4) {return (lResult ^ 0x80000000 ^ lX8 ^ lY8);}if (lX4 | lY4) {if (lResult & 0x40000000) {return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);} else {return (lResult ^ 0x40000000 ^ lX8 ^ lY8);}} else {return (lResult ^ lX8 ^ lY8);}}function F(x, y, z) {return (x & y) | ((~x) & z);}function G(x, y, z) {return (x & z) | (y & (~z));}function H(x, y, z) {return (x ^ y ^ z);}function I(x, y, z) {return (y ^ (x | (~z)));}function FF(a, b, c, d, x, s, ac) {a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));return AddUnsigned(RotateLeft(a, s), b);};function GG(a, b, c, d, x, s, ac) {a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));return AddUnsigned(RotateLeft(a, s), b);};function HH(a, b, c, d, x, s, ac) {a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));return AddUnsigned(RotateLeft(a, s), b);};function II(a, b, c, d, x, s, ac) {a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));return AddUnsigned(RotateLeft(a, s), b);};function ConvertToWordArray(string) {var lWordCount;var lMessageLength = string.length;var lNumberOfWords_temp1 = lMessageLength + 8;var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) \/ 64;var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;var lWordArray = Array(lNumberOfWords - 1);var lBytePosition = 0;var lByteCount = 0;while (lByteCount < lMessageLength) {lWordCount = (lByteCount - (lByteCount % 4)) \/ 4;lBytePosition = (lByteCount % 4) * 8;lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition));lByteCount++;}lWordCount = (lByteCount - (lByteCount % 4)) \/ 4;lBytePosition = (lByteCount % 4) * 8;lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);lWordArray[lNumberOfWords - 2] = lMessageLength << 3;lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;return lWordArray;};function WordToHex(lValue) {var WordToHexValue = '',WordToHexValue_temp = '',lByte, lCount;for (lCount = 0; lCount <= 3; lCount++) {lByte = (lValue >>> (lCount * 8)) & 255;WordToHexValue_temp = '0' + lByte.toString(16);WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);}return WordToHexValue;};function Utf8Encode(string) {string = string.replace(\/\\r\\n\/g, '\\n');var utftext = '';for (var n = 0; n < string.length; n++) {var c = string.charCodeAt(n);if (c < 128) {utftext += String.fromCharCode(c);} else if ((c > 127) && (c < 2048)) {utftext += String.fromCharCode((c >> 6) | 192);utftext += String.fromCharCode((c & 63) | 128);} else {utftext += String.fromCharCode((c >> 12) | 224);utftext += String.fromCharCode(((c >> 6) & 63) | 128);utftext += String.fromCharCode((c & 63) | 128);}}return utftext;};var x = Array();var k, AA, BB, CC, DD, a, b, c, d;var S11 = 7,S12 = 12,S13 = 17,S14 = 22;var S21 = 5,S22 = 9,S23 = 14,S24 = 20;var S31 = 4,S32 = 11,S33 = 16,S34 = 23;var S41 = 6,S42 = 10,S43 = 15,S44 = 21;string = Utf8Encode(string);x = ConvertToWordArray(string);a = 0x67452301;b = 0xEFCDAB89;c = 0x98BADCFE;d = 0x10325476;for (k = 0; k < x.length; k += 16) {AA = a;BB = b;CC = c;DD = d;a = FF(a, b, c, d, x[k + 0], S11, 0xD76AA478);d = FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);c = FF(c, d, a, b, x[k + 2], S13, 0x242070DB);b = FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);a = FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);d = FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);c = FF(c, d, a, b, x[k + 6], S13, 0xA8304613);b = FF(b, c, d, a, x[k + 7], S14, 0xFD469501);a = FF(a, b, c, d, x[k + 8], S11, 0x698098D8);d = FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);c = FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);b = FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);a = FF(a, b, c, d, x[k + 12], S11, 0x6B901122);d = FF(d, a, b, c, x[k + 13], S12, 0xFD987193);c = FF(c, d, a, b, x[k + 14], S13, 0xA679438E);b = FF(b, c, d, a, x[k + 15], S14, 0x49B40821);a = GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);d = GG(d, a, b, c, x[k + 6], S22, 0xC040B340);c = GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);b = GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA);a = GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);c = GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);b = GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);a = GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);d = GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);c = GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);b = GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);a = GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);d = GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);c = GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);b = GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);a = HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);d = HH(d, a, b, c, x[k + 8], S32, 0x8771F681);c = HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);b = HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);a = HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);d = HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);c = HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);b = HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);a = HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);d = HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA);c = HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);b = HH(b, c, d, a, x[k + 6], S34, 0x4881D05);a = HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);d = HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);c = HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);b = HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);a = II(a, b, c, d, x[k + 0], S41, 0xF4292244);d = II(d, a, b, c, x[k + 7], S42, 0x432AFF97);c = II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);b = II(b, c, d, a, x[k + 5], S44, 0xFC93A039);a = II(a, b, c, d, x[k + 12], S41, 0x655B59C3);d = II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);c = II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);b = II(b, c, d, a, x[k + 1], S44, 0x85845DD1);a = II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);d = II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);c = II(c, d, a, b, x[k + 6], S43, 0xA3014314);b = II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);a = II(a, b, c, d, x[k + 4], S41, 0xF7537E82);d = II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);c = II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);b = II(b, c, d, a, x[k + 9], S44, 0xEB86D391);a = AddUnsigned(a, AA);b = AddUnsigned(b, BB);c = AddUnsigned(c, CC);d = AddUnsigned(d, DD);}var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);return temp.toLowerCase();};var regex = \/\\b([^\\s]+@[^\\s]+)\\b\/g;return MD5(el.innerText.match(regex).pop());};","log_level":"error","batch_time":10,"batch_event_type_black_list":["click"],"batch_event_type_white_list":[],"user_identification":{"mode":"cross_domain_id"},"location":{"ip":!0,"country_code":!0,"country_name":!0,"region_code":!0,"region_name":!0,"city":!0,"zip_code":!0,"time_zone":!0,"latitude":!0,"longitude":!0,"metro_code":!0},"device":{"type":!0,"brand":!0,"model":!0,"orientation":!0,"resolution":!0,"battery":!0,"max_touch_points":!0,"hardware_concurrency":!0,"device_pixel_ratio":!0},"os":{"name":!0,"version":!0,"platform":!0},"browser":{"type":!0,"name":!0,"version":!0,"engine":!0,"engine_version":!0,"user_agent":!0,"history":!0,"window_size":!0,"language":!0,"cookie":{"mode":"specific","parameters":["_mgExp-79","_ga"]}},"network":{"downlink":!0,"downlinkMax":!0,"effectiveType":!0,"rtt":!0,"saveData":!0,"type":!0},"global_variables":{"parameters":[]},"custom_attributes":[],"url":{"mode":"specific","parameters":["utm_source","utm_medium","utm_campaign","utm_term","utm_content"]},"events":{"groups":[{"name":"pageview","running":!0,"selector":{"mode":"css","selection":["body"]},"type":["inview"],"handler":""},{"name":"search_autocomplete_input","running":!0,"selector":{"mode":"css","selection":["#form-sitesearch-input","#site-search-input"]},"type":["input"],"handler":"runDataGatherer.attributes.input = runDataGatherer.element.value;"},{"name":"search_autocomplete_view","running":!0,"selector":{"mode":"css","selection":[".sitesearch-suggest ul li > a",".site-search-suggestions__products .site-search-suggestions__list__item__link"]},"type":["inview"],"handler":"runDataGatherer.attributes.link = runDataGatherer.element.href.split('?')[0];"},{"name":"search_autocomplete_click","running":!0,"selector":{"mode":"css","selection":[".sitesearch-suggest ul li > a",".site-search-suggestions__products .site-search-suggestions__list__item__link"]},"type":["click"],"handler":"runDataGatherer.attributes.link = runDataGatherer.element.href.split('?')[0];"},{"name":"search_autocomplete_other_entities_click","running":!0,"selector":{"mode":"css","selection":[".site-search-suggestions__brands-and-categories [data-sel='search-suggest-category-brand'] a"]},"type":["click"],"handler":"runDataGatherer.attributes.link = runDataGatherer.element.href;var el = runDataGatherer.element.querySelector('.site-search-suggestions__list__item__link__title');if (el) {runDataGatherer.attributes.text = el.innerText;}"},{"name":"search_autocomplete_history_click","running":!0,"selector":{"mode":"css","selection":[".site-search-suggestions__history .site-search-suggestions__list__item__link"]},"type":["click"],"handler":"runDataGatherer.attributes.link = runDataGatherer.element.href;runDataGatherer.attributes.text = runDataGatherer.element.childNodes[0].nodeValue.trim();"},{"name":"detail_view","running":!0,"selector":{"mode":"css","selection":[".detail__container"]},"type":["inview"],"handler":"var id = false;for (var iteratorI = dataLayer.length - 1; iteratorI >= 0; iteratorI--) {if (dataLayer[iteratorI].hasOwnProperty('event') && dataLayer[iteratorI]['event'] == 'productDetail') {id = dataLayer[iteratorI]['ecommerce']['detail']['products'][0]['id'];break;}}if (id && id != runDataGatherer.detailViewId) {runDataGatherer.attributes.id = id;runDataGatherer.detailViewId = id;} else {runDataGatherer.lock = true;}"},{"name":"detail_view","running":!0,"selector":{"mode":"css","selection":["body"]},"type":["inview"],"handler":"var sendCustomEventCallback = function() {for (var iteratorI = dataLayer.length - 1; iteratorI >= 0; iteratorI--) {if (dataLayer[iteratorI].hasOwnProperty('event') && dataLayer[iteratorI]['event'] == 'productDetail') {var id = dataLayer[iteratorI]['ecommerce']['detail']['products'][0]['id'];if (id != runDataGatherer.detailViewId) {runDataGatherer.sendCustomEvent('detail_view', 'runSpyReportingToGa', {'id': id});}break;}}};runDataGatherer.runSpyReportingToGa('Product Detail', sendCustomEventCallback);runDataGatherer.lock = true;"},{"name":"basket_add","running":!0,"selector":{"mode":"css","selection":["body"]},"type":["inview"],"handler":"var sendCustomEventCallback = function() {for (var iteratorI = dataLayer.length - 1; iteratorI >= 0; iteratorI--) {var item = dataLayer[iteratorI];if (item.hasOwnProperty('event') && item['event'] == 'addToCart') {var eventName = 'basket_add';if (item['ecommerce']['add']['products'][0]['dimension77'] == 'search.list') {eventName = 'search_basket_add';}if (item['ecommerce']['add']['products'][0]['dimension77'] == 'category.list') {eventName = 'category_basket_add';}runDataGatherer.sendCustomEvent(eventName, 'runSpyReportingToGa', {'id': item['ecommerce']['add']['products'][0]['id'],});}break;}};runDataGatherer.runSpyReportingToGa('Add To Cart', sendCustomEventCallback);runDataGatherer.lock = true;"},{"name":"user_merge","running":!0,"selector":{"mode":"css","selection":["body"]},"type":["inview"],"handler":"if (dataLayer[0].hasOwnProperty('hashedEmail')) {runDataGatherer.attributes.id = dataLayer[0]['hashedEmail'];} else {runDataGatherer.lock = true;}"},{"name":"purchase","running":!0,"selector":{"mode":"css","selection":["body"]},"type":["inview"],"handler":"var sendCustomEventCallback = function() {for (var iteratorI = dataLayer.length - 1; iteratorI >= 0; iteratorI--) {if (dataLayer[iteratorI].hasOwnProperty('event') && dataLayer[iteratorI]['event'] == 'purchase') {var products = dataLayer[iteratorI]['ecommerce']['purchase']['products'];var orderId = dataLayer[iteratorI]['ecommerce']['purchase']['actionField']['id'];for (var iteratorJ = 0; iteratorJ < products.length; iteratorJ++) {runDataGatherer.sendCustomEvent('purchase', 'runSpyReportingToGa', {'id': products[iteratorJ]['id'],'price': products[iteratorJ]['price'],'quantity': products[iteratorJ]['quantity'],'order': orderId});}break;}}var el = document.querySelector('[data-sel=msg-order-number-old]');if (el) {runDataGatherer.sendCustomEvent('user_merge', 'runSpyReportingToGa', {'id': runDataGatherer.getHashedEmail(el),});}};runDataGatherer.runSpyReportingToGa('Purchase', sendCustomEventCallback);runDataGatherer.lock = true;"},{"name":"product_detail_accessories_view","running":!0,"selector":{"mode":"css","selection":[".product-box-simple__box"]},"root_selector":{"mode":"css","selection":".recommended-products__content-slider"},"type":["inview"],"handler":"if (document.querySelector('h1.detail__title')) {runDataGatherer.attributes.id = runDataGatherer.element.closest('[data-scroll-id]').getAttribute('data-scroll-id');} else {runDataGatherer.lock = true;}"},{"name":"product_detail_accessories_click","running":!0,"selector":{"mode":"css","selection":[".product-box-simple__box"]},"type":["click"],"handler":"if (document.querySelector('h1.detail__title') && !runDataGatherer.nativeEvent.path[0].classList.contains('add-to-cart-button__inner__text')) {runDataGatherer.attributes.id = runDataGatherer.element.closest('[data-scroll-id]').getAttribute('data-scroll-id');} else {runDataGatherer.lock = true;}"},{"name":"product_detail_accessories_basket_add","running":!0,"selector":{"mode":"css","selection":[".product-box-simple__box .add-to-cart-button"]},"type":["click"],"handler":"if (document.querySelector('h1.detail__title')) {runDataGatherer.attributes.id = runDataGatherer.element.closest('[data-scroll-id]').getAttribute('data-scroll-id');} else {runDataGatherer.lock = true;}"},{"name":"search_view","running":!0,"selector":{"mode":"css","selection":[".product-list article",".category-products article"]},"type":["inview"],"handler":"if (location.pathname == '\/hledej') {if (runDataGatherer.element.hasAttribute('data-scroll-id')) {runDataGatherer.attributes.id = runDataGatherer.element.getAttribute('data-scroll-id');} else {runDataGatherer.attributes.id = runDataGatherer.element.getAttribute('data-id');}} else {runDataGatherer.lock = true;}"},{"name":"search_click","running":!0,"selector":{"mode":"css","selection":[".product-list article a",".category-products article a"]},"type":["click"],"handler":"if (location.pathname == '\/hledej') {if (runDataGatherer.element.closest('article').hasAttribute('data-scroll-id')) {runDataGatherer.attributes.id = runDataGatherer.element.closest('article').getAttribute('data-scroll-id');} else {runDataGatherer.attributes.id = runDataGatherer.element.closest('article').getAttribute('data-id');}} else {runDataGatherer.lock = true;}"},{"name":"category_view","running":!0,"selector":{"mode":"css","selection":[".product-list article",".category-products article"]},"type":["inview"],"handler":"if (location.pathname !== '\/hledej') {if (runDataGatherer.element.hasAttribute('data-scroll-id')) {runDataGatherer.attributes.id = runDataGatherer.element.getAttribute('data-scroll-id');} else {runDataGatherer.attributes.id = runDataGatherer.element.getAttribute('data-id');}} else {runDataGatherer.lock = true;}"},{"name":"category_click","running":!0,"selector":{"mode":"css","selection":[".product-list article a",".category-products article a"]},"type":["click"],"handler":"if (location.pathname !== '\/hledej') {if (runDataGatherer.element.closest('article').hasAttribute('data-scroll-id')) {runDataGatherer.attributes.id = runDataGatherer.element.closest('article').getAttribute('data-scroll-id');} else {runDataGatherer.attributes.id = runDataGatherer.element.closest('article').getAttribute('data-id');}} else {runDataGatherer.lock = true;}"},{"name":"product_detail_carousel_next_click","running":!0,"selector":{"mode":"css","selection":[".recommended-products__content-slider .hooper-list .hooper-next"]},"type":["click"],"handler":""}],"point":!0}};return JSON.parse(JSON.stringify(t))}catch(e){this.errorHandler(e,"getConfig")}},getAccountId:function(){return"mall_si"},getUrl:function(){return"https://api.databreakers.com/v1/mall_si/dataPoint"},getVersionOfScript:function(){return 1628162527},getVersionOfConfig:function(){return 1631378460},errorHandler:function(e,r,n,a){try{if(a)return;if(["warning","error"].indexOf(this.gathererLogLevel)>=0){var i=this.prepareOuput(this.getConfig(),!0);i["dataPoints"][0]["attributes"]["message_type"]="error";i["dataPoints"][0]["attributes"]["error_name"]=e.name;i["dataPoints"][0]["attributes"]["error_message"]="area: "+r+", "+e.message;if(n&&getPropertyNames(n).length!==0){i.dataPoints[0].attributes.original_request={"type":n.type,"method":n.method,"source_url":{"page":n.url}};if(n.hasOwnProperty("body")){i.dataPoints[0].attributes.original_request.body=JSON.stringify(n.body,null)}};var o=this.createCORSRequest("POST",this.getUrl());o.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();o.onerror=null;return!1};if(o){o.send(JSON.stringify(i))}}}catch(t){}},warningHandler:function(e){try{if(this.gathererLogLevel==="warning"){var n={"dataPoints":[{"attributes":{"script_id":this.gathererScriptId,"script_version":this.getVersionOfScript(),"config_version":this.getVersionOfConfig(),"script_type":"gatherer","source_url":{"page":location.href},"user_agent":navigator.userAgent,"message_type":"warning","warning_type":"not_possible_to_read","warning_message":"It is not possible to read: "+e}}]};var r=this.createCORSRequest("POST",this.getUrl());r.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();r.onerror=null;return!1};if(r){r.send(JSON.stringify(n))}}}catch(t){}},main:function(){try{var t=this.getConfig();this.gathererScriptId=t["script_id"];this.gathererLogLevel=t["log_level"];if(t["running"]&&this.resolveRunConditions(t["run_conditions"]["expressions"])){if(!window.hasOwnProperty("runIndividualizer")){this.initPolyfills();this.initInView()};if(t.hasOwnProperty("variables")){eval(t["variables"])};if(t.hasOwnProperty("declarations")){eval(t["declarations"])};this.setUserIdCrossDomain(t["user_identification"]);this.setRemoteData();this.initReporting(t,this.getUrl())}}catch(e){this.errorHandler(e,"main")}},makeCorsRequest:function(e,r,n,a,o,s){try{var i=this.createCORSRequest(n,r),l=this;if(!i){console.log("CORS not supported");return};if(e["dataPoints"]){i.body=e["dataPoints"][0]};i.onreadystatechange=function(){if(typeof a=="function"&&i.readyState===i.DONE&&[200,204].indexOf(i.status)>=0){a(i)}};i.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();i.onerror=null;l.errorHandler(e,"makeCorsRequest",i,s);return!1};i.send(JSON.stringify(e))}catch(t){}},initReporting:function(e,n){var r=this;try{e["events"]["groups"].forEach(function(t){if(!t.hasOwnProperty("running")||t["running"]){t["type"].forEach(function(a){if(a==="inview"){var i=function(a){try{r.element=a;r.event={};r.event["type"]="inview";r.event["threshold"]=t.hasOwnProperty("threshold")?t["threshold"]:0;r.event["name"]=t["name"];r.event["selector"]={};r.event["selector"]["mode"]=t["selector"]["mode"];if(t["selector"]["mode"]==="xpath"){r.event["selector"]["selection"]=r.getElementTreeXPath(r.element)}
else{r.event["selector"]["selection"]=r.getElementTreeCss(r.element)};r.lock=!1;r.attributes={};eval(t["handler"]);if(r.lock)return;if(getPropertyNames(r.attributes).length!==0){r.event["attributes"]=r.attributes};var o=r.prepareOuput(e);o["dataPoints"][0]["attributes"]["event"]=r.event;var s=e["batch_event_type_black_list"].indexOf("inview")<0,l=e["batch_event_type_white_list"].length==0||e["batch_event_type_white_list"].indexOf("inview")>=0;if(e["batch_time"]!=0&&s&&l){if(r.dataPoints.length>0){r.dataPoints.push(o["dataPoints"][0])}
else{r.dataPoints.push(o["dataPoints"][0]);setTimeout(function(){r.makeCorsRequest({"dataPoints":r.dataPoints},n,"POST",null,!0);r.dataPoints=[]},e["batch_time"])}}
else{r.makeCorsRequest(o,n,"POST",null,!0)}}catch(i){r.errorHandler(i,"initReporting callback inview, event: "+t["name"])}},s=function(){var e=[];t["selector"]["selection"].forEach(function(n){if(t["selector"]["mode"]==="xpath"){e=e.concat(r.selectElements(n))}
else{e=e.concat(Array.prototype.slice.call(document.querySelectorAll(n)))}});return e};r.appear({appear:i,bounds:t.hasOwnProperty("threshold")?t["threshold"]:0,getElements:s,reappearOption:t.hasOwnProperty("reappear")?t["reappear"]:!1,rootSelector:t.hasOwnProperty("root_selector")?t["root_selector"]:!1})};if(a==="pushState"){var i=function(){try{r.element=null;r.event={};r.event["type"]="pushState";r.event["name"]=t["name"];r.lock=!1;r.attributes={};eval(t["handler"]);if(r.lock)return;if(getPropertyNames(r.attributes).length!==0){r.event["attributes"]=r.attributes};var i=r.prepareOuput(e);i["dataPoints"][0]["attributes"]["event"]=r.event;r.makeCorsRequest(i,n,"POST",null,!0)}catch(a){r.errorHandler(a,"initReporting callback pushState, event: "+t["name"])}};if(r.pushStateCallbacks.length==0){var o=history.pushState;history.pushState=function(){o.apply(this,arguments);r.pushStateCallbacks.forEach(function(e){e()})}};r.pushStateCallbacks.push(i)};if(a!=="inview"&&a!=="pushState"){var i=function(a){var s=[],u;t["selector"]["selection"].forEach(function(e){if(e=="document"){s.push(document)}
else{if(t["selector"]["mode"]==="xpath"){s=s.concat(r.selectElements(e))}
else{s=s.concat(Array.prototype.slice.call(document.querySelectorAll(e)))}}});for(var d=0;d<s.length;d++){try{var o;if(a.hasOwnProperty("path")&&Array.isArray(a.path)&&a.path.length>=2){o=a.path}
else{o=[];var c=a.target;while(c){o.push(c);c=c.parentElement};if(o.indexOf(window)===-1&&o.indexOf(document)===-1)o.push(document);if(o.indexOf(window)===-1)o.push(window)};u=o.indexOf(s[d]);if(u<0)continue;r.element=o[u];r.event={};r.nativeEvent=a;r.event["point"]=r.loadPoint(e["events"]["point"],a);r.event["type"]=a["type"];r.event["name"]=t["name"];r.event["selector"]={};r.event["selector"]["mode"]=t["selector"]["mode"];if(t["selector"]["mode"]==="xpath"){r.event["selector"]["selection"]=r.getElementTreeXPath(r.element)}
else{r.event["selector"]["selection"]=r.getElementTreeCss(r.element)};r.lock=!1;r.attributes={};eval(t["handler"]);if(r.lock)return;if(getPropertyNames(r.attributes).length!==0){r.event["attributes"]=r.attributes};var l=r.prepareOuput(e);l["dataPoints"][0]["attributes"]["event"]=r.event;var h=e["batch_event_type_black_list"].indexOf(a["type"])<0,p=e["batch_event_type_white_list"].length==0||e["batch_event_type_white_list"].indexOf(a["type"])>=0;if(e["batch_time"]!=0&&h&&p){if(r.dataPoints.length>0){r.dataPoints.push(l["dataPoints"][0])}
else{r.dataPoints.push(l["dataPoints"][0]);setTimeout(function(){r.makeCorsRequest({"dataPoints":r.dataPoints},n,"POST",null,!0);r.dataPoints=[]},e["batch_time"])}}
else{r.makeCorsRequest(l,n,"POST",null,!0)};break}catch(i){r.errorHandler(i,"initReporting callback noinview, event: "+t["name"]);break}}};document.addEventListener(a,i,!0)}})}})}catch(t){this.errorHandler(t,"initReporting")}},createCORSRequest:function(e,r){try{var n=new XMLHttpRequest();if("withCredentials" in n){n.open(e,r);n.type="XMLHttpRequest"}
else if(typeof XDomainRequest!="undefined"){n=new XDomainRequest();n.open(e,r);n.type="XDomainRequest"}
else{return null};n.setRequestHeader("Content-Type","text/plain;charset=utf-8");n.url=r;n.method=e;return n}catch(t){}},prepareOuput:function(e,r){try{var n={};n["dataPoints"]=[];n["dataPoints"].push({"attributes":{}});n["dataPoints"][0]["attributes"]["device"]={};n["dataPoints"][0]["attributes"]["browser"]={};n["dataPoints"][0]["attributes"]["os"]={};n["dataPoints"][0]["attributes"]["location"]={};n["dataPoints"][0]["attributes"]["script_id"]=e["script_id"];n["dataPoints"][0]["attributes"]["script_version"]=this.getVersionOfScript();n["dataPoints"][0]["attributes"]["config_version"]=this.getVersionOfConfig();n["dataPoints"][0]["attributes"]["script_type"]="gatherer";var x=this.loadUserId(e["user_identification"],r);if(x){n["dataPoints"][0]["attributes"]["user_identification"]={};n["dataPoints"][0]["attributes"]["user_identification"]["id"]=x;var w=this.loadUserIdCrossDomain(e["user_identification"],r);if(w){n["dataPoints"][0]["attributes"]["user_identification"]["cross_domain_id"]=w}};var a=this.loadRemoteData({"device":e["device"],"browser":e["browser"],"os":e["os"],"location":e["location"]},r);if(a&&a.hasOwnProperty("device")&&getPropertyNames(a["device"]).length!==0){n["dataPoints"][0]["attributes"]["device"]=a["device"]};var b=this.loadOrientation(e["device"]["orientation"],r);if(b){n["dataPoints"][0]["attributes"]["device"]["orientation"]=b};var p=this.loadResolution(e["device"]["resolution"],r);if(p&&getPropertyNames(p).length!==0){n["dataPoints"][0]["attributes"]["device"]["resolution"]=p};var h=this.loadBattery(e["device"]["battery"],r);if(h&&getPropertyNames(h).length!==0){n["dataPoints"][0]["attributes"]["device"]["battery"]=h};var y=this.loadMaxTouchPoints(e["device"]["max_touch_points"],r);if(y){n["dataPoints"][0]["attributes"]["device"]["max_touch_points"]=y};var v=this.loadHardwareConcurrency(e["device"]["hardware_concurrency"],r);if(v){n["dataPoints"][0]["attributes"]["device"]["hardware_concurrency"]=v};var g=this.loadDevicePixelRatio(e["device"]["device_pixel_ratio"],r);if(g){n["dataPoints"][0]["attributes"]["device"]["device_pixel_ratio"]=g};if(a&&a.hasOwnProperty("browser")&&getPropertyNames(a["browser"]).length!==0){n["dataPoints"][0]["attributes"]["browser"]=a["browser"]};var m=this.loadUserAgent(e["browser"]["user_agent"],r);if(m){n["dataPoints"][0]["attributes"]["browser"]["user_agent"]=m};var u=this.loadCookie(e["browser"]["cookie"],r);if(u&&getPropertyNames(u).length!==0){n["dataPoints"][0]["attributes"]["browser"]["cookie"]=u};var d=this.loadHistory(e["browser"]["history"],r);if(d&&getPropertyNames(d).length!==0){n["dataPoints"][0]["attributes"]["browser"]["history"]=d};var c=this.loadWindowSize(e["browser"]["window_size"],r);if(c&&getPropertyNames(c).length!==0){n["dataPoints"][0]["attributes"]["browser"]["window_size"]=c};var f=this.loadLanguage(e["browser"]["language"],r);if(f){n["dataPoints"][0]["attributes"]["browser"]["language"]=f};if(a&&a.hasOwnProperty("os")&&getPropertyNames(a["os"]).length!==0){n["dataPoints"][0]["attributes"]["os"]=a["os"]};var l=this.loadNetwork(e["network"],r);if(l&&getPropertyNames(l).length!==0){n["dataPoints"][0]["attributes"]["network"]=l};if(a&&a.hasOwnProperty("location")&&getPropertyNames(a["location"]).length!==0){n["dataPoints"][0]["attributes"]["location"]=a["location"]};var s=this.loadGlobalVariables(e["global_variables"],r);if(s&&getPropertyNames(s).length!==0){n["dataPoints"][0]["attributes"]["global_variables"]=s};var o=this.loadCustomAttributes(e["custom_attributes"],r);if(o&&getPropertyNames(o).length!==0){n["dataPoints"][0]["attributes"]["custom_attributes"]=o};var i=this.loadUrl(e["url"],r);if(i&&getPropertyNames(i).length!==0){n["dataPoints"][0]["attributes"]["source_url"]=i};return n}catch(t){this.errorHandler(t,"prepareOuput",{},r)}},selectElements:function(e,r){try{var a=document.evaluate(e,r?r:document,null,XPathResult.ANY_TYPE,null),i=[],o=0,n=a.iterateNext();while(n){i[o]=n;n=a.iterateNext();++o};return i}catch(t){this.errorHandler(t,"selectElements")}},saveToCookie:function(e,r){try{var n="."+location.hostname.replace("www.","");document.cookie=e+"="+r+";max-age="+(60*60*24*365*5)+";path=/; domain="+n+";"}catch(t){this.errorHandler(t,"saveToCookie")}},setRemoteData:function(e){var r=this;try{function i(){try{if(r.localStorageErrorTimestamp&&(new Date().getTime()-r.localStorageErrorTimestamp)<300000)return;var n="https://publicapi.databreakers.com/v1/gatherer-data-provider",a=function(t){try{if(t.readyState===t.DONE&&t.status===200){var a=JSON.parse(t.responseText),s="";if(a&&a!==null&&typeof a==="object"){try{for(var o in a){for(var i in a[o]){if(a[o][i]=="")continue;if(i==="ip"){s=s.concat(o+"-"+i+"="+a[o][i]+","+Date.now()+"; ")}
else{s=s.concat(o+"-"+i+"="+a[o][i]+"; ")}}};localStorage.setItem("db_data_gatherer",r.getBase64Object().encode(s))}catch(n){r.localStorageErrorTimestamp=new Date().getTime();r.errorHandler(n,"setRemoteData (gatherer_data_provider service response)")}}}
else{r.errorHandler({"name":"bad_request","message":"xhr.status: "+t.status},"setRemoteData (gatherer_data_provider service response)")}}catch(n){r.errorHandler({"name":"bad_request","message":"xhr.status: "+t.status},"getRemoteData callback",{},e)}};r.makeCorsRequest("",n,"GET",a,!0,e)}catch(t){r.errorHandler(t,"setRemoteData makeCorsRequest",{},e)}};var a=localStorage.getItem("db_data_gatherer");if(a){var n=/ip=([^;]+)/.exec(this.getBase64Object().decode(a))};if(!n){i();return};var o=new Date(),s=new Date(parseInt(n[1].split(",")[1],10)),l=(o-s)/60000;if(l>=30){i()}}catch(t){this.errorHandler(t,"setRemoteData",{},e)}},setUserIdCrossDomain:function(e){var a=this;try{if(e&&e.hasOwnProperty("mode")){if(e["mode"]!=="cross_domain_id")return;if(/db_uicd=([^;]+)/.exec(document.cookie))return;var r=document.createElement("iframe");r.onload=function(){r.contentWindow.postMessage(window.location.href,"https://www.databreakers.com")};var n=function(e){if(e.origin==="https://www.databreakers.com"){a.saveToCookie("db_uicd",e.data)}};window.addEventListener("message",n,!1);r.setAttribute("src","https://www.databreakers.com/cookie-maker");r.style.display="none";setTimeout(function(){try{document.getElementsByTagName("head")[0].appendChild(r)}catch(e){this.errorHandler(e,"setUserIdCrossDomain appendChild(iframe)")}},1)}}catch(t){this.errorHandler(t,"setUserId")}},loadUserId:function(e,r){try{var n;if(e&&e.hasOwnProperty("mode")){switch(e["mode"]){case"generated_id":case"cross_domain_id":n=/db_ui=([^;]+)/.exec(document.cookie);if(n){return n[1]}
else{n=this.guid();this.saveToCookie("db_ui",n);return n};case"ga_cookie_id":if(e["parameter"]){var i=new RegExp(name+"=([^;]+)");n=i.exec(document.cookie)}
else{n=/_ga=([^;]+)/.exec(document.cookie)};if(n&&n.hasOwnProperty(1)){return n[1]}
else{this.warningHandler("user_identification ga_cookie_id")};case"data_layer":var a=eval(e["parameter"]);if(a){return a}
else{this.warningHandler("user_identification data_layer")}}}}catch(t){this.errorHandler(t,"loadUserId",{},r)}},loadUserIdCrossDomain:function(e,r){try{if(e&&e.hasOwnProperty("mode")){if(e["mode"]!=="cross_domain_id")return;identification=/db_uicd=([^;]+)/.exec(document.cookie);if(identification){return identification[1]}}}catch(t){this.errorHandler(t,"loadUserIdCrossDomain",{},r)}},loadRemoteData:function(e,r){var l=this;try{if(e){var s={"device":["type","brand","model"],"browser":["type","name","version","engine","engine_version"],"os":["name","version","platform"],"location":["ip","country_code","country_name","region_code","city","zip_code","time_code","latitude","longitude","metro_code"]};var a={};var i,o=localStorage.getItem("db_data_gatherer");if(!o){this.setRemoteData(r);return a};o=this.getBase64Object().decode(o);for(var n in s){if(e.hasOwnProperty(n)&&e[n]){a[n]={};s[n].forEach(function(e){i=new RegExp(n+"-"+e+"=([^;]+)").exec(o);if(i&&i.hasOwnProperty(1)){if(e=="ip"){a[n][e]=i[1].split(",")[0]}
else{a[n][e]=i[1]}}})}};if(getPropertyNames(a).length===0){this.setRemoteData(r)};return a}}catch(t){this.errorHandler(t,"loadRemoteData",{},r)}},loadResolution:function(e,r){try{if(e){if(screen.width!==undefined&&screen.height!==undefined){return{"width":screen.width,"height":screen.height}}
else{this.warningHandler("device resolution")}}}catch(t){this.errorHandler(t,"loadResolution",{},r)}},loadUserAgent:function(e,r){try{if(e){if(navigator.userAgent!==undefined){return navigator.userAgent}
else{this.warningHandler("browser user agent")}}}catch(t){this.errorHandler(t,"loadUserAgent",{},r)}},loadMaxTouchPoints:function(e,r){try{if(e){if(navigator.maxTouchPoints!==undefined){return navigator.maxTouchPoints}
else{this.warningHandler("device max_touch_points")}}}catch(t){this.errorHandler(t,"loadMaxTouchPoints",{},r)}},loadDevicePixelRatio:function(e,r){try{if(e){if(window.devicePixelRatio!==undefined){return window.devicePixelRatio}
else{this.warningHandler("device pixel ratio")}}}catch(t){this.errorHandler(t,"loadDevicePixelRatio",{},r)}},loadHardwareConcurrency:function(e,r){try{if(e){if(navigator.hardwareConcurrency!==undefined){return navigator.hardwareConcurrency}
else{this.warningHandler("device hardware concurrency")}}}catch(t){this.errorHandler(t,"loadHardwareConcurrency",{},r)}},loadOrientation:function(e,r){try{if(e){if(screen.orientation!==undefined&&screen.orientation.type!==undefined){return screen.orientation.type}
else{this.warningHandler("device orientation")}}}catch(t){this.errorHandler(t,"loadOrientation",{},r)}},loadLanguage:function(e,r){try{if(e){if(navigator.language!==undefined){return navigator.language}
else{this.warningHandler("browser language")}}}catch(t){this.errorHandler(t,"loadLanguage",{},r)}},loadWindowSize:function(e,r){try{if(e){var n={};if(window.outerWidth!==undefined){n["width"]=window.outerWidth}
else{this.warningHandler("browser window size width")};if(window.outerHeight!==undefined){n["height"]=window.outerHeight}
else{this.warningHandler("browser window size height")};return n}}catch(t){this.errorHandler(t,"loadWindowSize",{},r)}},loadNetwork:function(e,r){try{if(e){var i=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(i!==undefined){var a={};for(var n in e){if(e[n]&&navigator.connection[n]!==undefined){a[n]=navigator.connection[n]}};return a}
else{this.warningHandler("navigator connection")}}}catch(t){this.errorHandler(t,"loadNetwork",{},r)}},loadBattery:function(e,r){try{if(e){if(navigator.getBattery!==undefined&&typeof navigator.getBattery().then==="function"){navigator.getBattery().then(function(e){sessionStorage.charging=e.charging;sessionStorage.level=e.level});return{"charging":sessionStorage.charging,"level":sessionStorage.level}}
else{this.warningHandler("device battery")}}}catch(t){this.errorHandler(t,"loadBattery",{},r)}},loadHistory:function(e,r){try{if(e){var n={};if(history!==undefined&&history.length!==undefined){n["length"]=history.length}
else{this.warningHandler("browser history length")};if(document.referrer!==undefined){if(document.referrer){n["referrer"]=document.referrer}}
else{this.warningHandler("browser history referrer")};return n}}catch(t){this.errorHandler(t,"loadHistory",{},r)}},loadGlobalVariables:function(e,r){var a=this;try{if(e&&e.hasOwnProperty("parameters")){var n={};e.parameters.forEach(function(e){try{var r=eval(e);n[e]=r}catch(t){a.warningHandler("global variable "+e)}});return n}}catch(t){this.errorHandler(t,"loadGlobalVariable",{},r)}},loadCustomAttributes:function(e,r){var o=this;try{if(e&&getPropertyNames(e).length>0){var a={};for(var n in e){try{var i=eval(e[n]);a[n]=i}catch(t){o.warningHandler("custom attribute"+n)}};return a}}catch(t){this.errorHandler(t,"loadCustomAttributes",{},r)}},loadCookie:function(e,r){var i=this;try{if(e&&e.hasOwnProperty("mode")&&e["mode"]){switch(e["mode"]){case"all":if(document.cookie!==undefined){var a={};document.cookie.split(";").forEach(function(e){e=e.replace(/^\s+|\s+$/g,"").split("=");a[e[0]]=e[1]});return a}
else{this.warningHandler("browser cookie")};case"specific":if(e.hasOwnProperty("parameters")&&e["parameters"]){if(document.cookie!==undefined){var n={};e["parameters"].forEach(function(e){var r=new RegExp(e+"=([^;]+)"),t=r.exec(document.cookie);if(t&&t.hasOwnProperty(1)){n[e]=t[1]}
else{i.warningHandler("browser cookie specific parameter "+e)}});return n}
else{this.warningHandler("browser cookie")}}
else{this.warningHandler("browser cookie specific mode parameters")};case"none":return}}}catch(t){this.errorHandler(t,"loadCookie",{},r)}},loadUrl:function(e,r){var l=this;try{var n={};var a={};var s={};var i;if(e&&e.hasOwnProperty("mode")&&e["mode"]){switch(e["mode"]){case"all":if(location&&location.href!==undefined&&location["href"]){n["page"]=location.href;n["pathname"]=location.pathname;n["hostname"]=this.extractHostname(location.href);var o=location.href.split("?")[1];if(o){o.split("&").forEach(function(e){i=e.split("=");a[i[0]]=i[1]})};if(getPropertyNames(a).length!==0){n["parameters"]=a};return n}
else{this.warningHandler("url")};case"specific":if(e.hasOwnProperty("parameters")&&e["parameters"]){if(location&&location.href!==undefined&&location["href"]){n["page"]=location.href;n["pathname"]=location.pathname;n["hostname"]=this.extractHostname(location.href);n["parameters"]={};var o=location.href.split("?")[1];if(o){o.split("&").forEach(function(e){i=e.split("=");a[i[0]]=i[1]});e["parameters"].forEach(function(e){if(a.hasOwnProperty(e)&&a[e]){s[e]=a[e]}
else{l.warningHandler("url specific parameter "+e)}});if(getPropertyNames(s).length!==0){n["parameters"]=s}};return n}
else{this.warningHandler("url")}}
else{this.warningHandler("url specific parameters")}}}}catch(t){this.errorHandler(t,"loadUrl",{},r)}},loadPoint:function(e,r){try{if(e){if(r.x!==undefined&&r.y!==undefined){return{x:r.x,y:r.y}}
else{this.warningHandler("event point")}}}catch(t){this.errorHandler(t,"loadPoint")}},guid:function(){try{function t(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}catch(e){this.errorHandler(e,"guid")}},getElementTreeXPath:function(e){try{var i=[];for(;e&&e.nodeType==Node.ELEMENT_NODE;e=e.parentNode){var n=0,a=!1;for(var r=e.previousSibling;r;r=r.previousSibling){if(r.nodeType==Node.DOCUMENT_TYPE_NODE)continue;if(r.nodeName==e.nodeName)++n};for(var r=e.nextSibling;r&&!a;r=r.nextSibling){if(r.nodeName==e.nodeName)a=!0};var o=(e.prefix?e.prefix+":":"")+e.localName,s=(n||a?"["+(n+1)+"]":"");i.splice(0,0,o+s)};return i.length?"/"+i.join("/"):null}catch(t){this.errorHandler(t,"getElementTreeXPath")}},getElementTreeCss:function(e){try{if(!(e instanceof Element))return;var i=[];while(e.nodeType===Node.ELEMENT_NODE){var r=e.nodeName.toLowerCase(),n=e,a=1;while(n=n.previousElementSibling){if(n.nodeName.toLowerCase()==r)a++};if(a!=1)r+=":nth-of-type("+a+")";i.unshift(r);e=e.parentNode};return i.join(" > ")}catch(t){this.errorHandler(t,"getElementTreeCss")}},initInView:function(){var t=this;try{this.appear=(function(){"use strict";var r=null,n=0,e={};function i(){var t=window.scrollY||window.pageYOffset;if(r!=null){e.velocity=t-r;e.delta=(e.velocity>=0)?e.velocity:(-1*e.velocity)};r=t;if(n){clearTimeout(n)};n=setTimeout(function(){r=null},30)};addEventListener("scroll",i,!0);function a(e,r,n){var a=e.getBoundingClientRect(),o=((a.top+a.height)>=0&&(a.left+a.width)>=0&&(a.bottom-a.height)<=((window.innerHeight||document.documentElement.clientHeight)-(r*a.height))&&(a.right-a.width)<=((window.innerWidth||document.documentElement.clientWidth)-(r*a.width)));if(o&&n){if(n["mode"]==="xpath"){var i=t.selectElements(n["selection"]).pop()}
else{var i=document.querySelector(n["selection"])};if(i){i=i.getBoundingClientRect();o=(Math.round(a.width+a.left)>Math.round(i.left))&&(Math.round(a.left)<Math.round(i.left+i.width)-10)}
else{o=!1}};return o};return function(r){return(function(r){var h=!1,m=[],i=new HashMap,s,c,n={},g,d;function v(e,t){return function(){var r=this,n=arguments;clearTimeout(s);s=setTimeout(function(){e.apply(r,n)},t)}};function o(){if(e.delta<n.delta.speed){if(!c){c=!0;l();setTimeout(function(){c=!1},n.delta.timeout)}}(v(function(){l()},n.debounce)())};function p(){l();addEventListener("scroll",o,!0);addEventListener("resize",o,!0);d=new MutationObserver(o);d.observe(document.body,{childList:!0,subtree:!0,attributes:!0})};function y(){m=[];if(s){clearTimeout(s)};f()};function f(){removeEventListener("scroll",o,!0);removeEventListener("resize",o,!0);d.disconnect()};function l(){try{var r=n.getElements();r.forEach(function(e){if(e==undefined)return;if(i.get(e)===undefined)i.set(e,!0);var t=window.getComputedStyle(e);if(e&&a(e,n.bounds,n.rootSelector)&&i.get(e)&&t.display!=="none"&&t.visibility!=="hidden"&&t.opacity!=="0"){var r=e,o,s=!0;while(r){o=window.getComputedStyle(r);if(o.display=="none"||o.visibility=="hidden"||o.opacity=="0"){s=!1;break};r=r.parentElement};if(s){n.appear(e);i.set(e,!1)}};if(n.reappearOption&&(!a(e,n.bounds,n.rootSelector)||t.display==="none"||t.visibility==="hidden"||t.opacity==="0")){i.set(e,!0)}})}catch(e){t.errorHandler(e,"initInView doCheckAppear")}};function u(){if(h){return};h=!0;if(n.init){n.init()};g=n.getElements;p()};return function(e){e=e||{};n={init:e.init,elements:e.elements,appear:e.appear,disappear:e.disappear,done:e.done,reappearOption:e.reappearOption,reappear:e.reappear,bounds:e.bounds||0,debounce:e.debounce||50,delta:{speed:e.deltaSpeed||50,timeout:e.deltaTimeout||500},getElements:e.getElements,rootSelector:e.rootSelector};addEventListener("DOMContentLoaded",u,!1);var r=!1;if(Function("/*@cc_on return document.documentMode===10@*/")()){r=!0};var t=document.readyState==="complete"||document.readyState==="loaded";if(r){if(t){u()}}
else{if(t||document.readyState==="interactive"){u()}};return{trigger:function(){l()},pause:function(){f()},resume:function(){p()},destroy:function(){y()}}}}()(r))}}())}catch(e){this.errorHandler(e,"initInView")}},initPolyfills:function(){try{window.getPropertyNames=Object.getOwnPropertyNames||function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}};return r};if(typeof Array.prototype.forEach!="function"){Array.prototype.forEach=function(e,t){if(typeof this.length!="number")return;if(typeof e!="function")return;if(typeof this=="object"){for(var r=0;r<this.length;r++){if(r in this){e.call(t||this,this[r],r,this)}
else{return}}}}};if(window.NodeList&&!NodeList.prototype.forEach){NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++){e.call(t,this[r],r,this)}}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var r=this.length>>>0,t=Number(arguments[1])||0;t=(t<0)?Math.ceil(t):Math.floor(t);if(t<0)t+=r;for(;t<r;t++){if(t in this&&this[t]===e)return t};return-1}};!function(e){var t=e.Element.prototype;"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(e){for(var r=(this.document||this.ownerDocument).querySelectorAll(e),t=0;r[t]&&r[t]!==this;)++t;return Boolean(r[t])}),"function"!=typeof t.closest&&(t.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode};return null})}(window);if(!Object.keys){Object.keys=(function(){var t=Object.prototype.hasOwnProperty,r=!({toString:null}).propertyIsEnumerable("toString"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=e.length;return function(a){if(typeof a!=="object"&&typeof a!=="function"||a===null)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in a){if(t.call(a,s))o.push(s)};if(r){for(var i=0;i<n;i++){if(t.call(a,e[i]))o.push(e[i])}};return o}})()}}catch(e){this.errorHandler(e,"initPolyfills")}},resolveRunConditions:function(e){try{if(e.length>0){var r=[];e.forEach(function(e){r.push(eval(e))});return r.every(function(e){return e})}
else{return!0}}catch(t){this.errorHandler(t,"resolveRunConditions")}},extractHostname:function(e){try{var r;if(e.indexOf("://")>-1){r=e.split("/")[2]}
else{r=e.split("/")[0]};r=r.split(":")[0];r=r.split("?")[0];r=r.replace("www.","");return r}catch(t){this.errorHandler(t,"extractHostname")}},getBase64Object:function(){try{var t=this;return{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var o="",s,r,n,c,d,l,a,i=0;e=t.getBase64Object()._utf8_encode(e);while(i<e.length){s=e.charCodeAt(i++);r=e.charCodeAt(i++);n=e.charCodeAt(i++);c=s>>2;d=(s&3)<<4|r>>4;l=(r&15)<<2|n>>6;a=n&63;if(isNaN(r)){l=a=64}
else if(isNaN(n)){a=64};o=o+this._keyStr.charAt(c)+this._keyStr.charAt(d)+this._keyStr.charAt(l)+this._keyStr.charAt(a)};return o},decode:function(e){var r="",s,l,c,d,i,a,o,n=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(n<e.length){d=this._keyStr.indexOf(e.charAt(n++));i=this._keyStr.indexOf(e.charAt(n++));a=this._keyStr.indexOf(e.charAt(n++));o=this._keyStr.indexOf(e.charAt(n++));s=d<<2|i>>4;l=(i&15)<<4|a>>2;c=(a&3)<<6|o;r=r+String.fromCharCode(s);if(a!=64){r=r+String.fromCharCode(l)};if(o!=64){r=r+String.fromCharCode(c)}};r=t.getBase64Object()._utf8_decode(r);return r},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var r="";for(var n=0;n<e.length;n++){var t=e.charCodeAt(n);if(t<128){r+=String.fromCharCode(t)}
else if(t>127&&t<2048){r+=String.fromCharCode(t>>6|192);r+=String.fromCharCode(t&63|128)}
else{r+=String.fromCharCode(t>>12|224);r+=String.fromCharCode(t>>6&63|128);r+=String.fromCharCode(t&63|128)}};return r},_utf8_decode:function(e){var n="",t=0,r=c1=c2=0;while(t<e.length){r=e.charCodeAt(t);if(r<128){n+=String.fromCharCode(r);t++}
else if(r>191&&r<224){c2=e.charCodeAt(t+1);n+=String.fromCharCode((r&31)<<6|c2&63);t+=2}
else{c2=e.charCodeAt(t+1);c3=e.charCodeAt(t+2);n+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);t+=3}};return n}}}catch(e){this.errorHandler(e,"getBase64Object")}},sendCustomEvent:function(e,r,n){try{var o=runDataGatherer.getConfig(),s=runDataGatherer.getUrl(),i=runDataGatherer.prepareOuput(o),a={};a.name=e;a.type=r;a.attributes=n;i["dataPoints"][0]["attributes"]["event"]=a;runDataGatherer.makeCorsRequest(i,s,"POST",null,!0)}catch(t){}},sendCustomEventToGa:function(e,r,n,a){try{var i=a?a:window.ga;i.getAll()[0].send({"hitType":"event","eventCategory":"databreakers_reporting-"+e+"-"+r,"eventLabel":this.loadUserId(this.getConfig()["user_identification"]),"eventAction":n,"nonInteraction":1})}catch(t){this.errorHandler(t,"sendCustomEventToGa")}},saveAbTestGroupToLocalStorage:function(e,r){try{var a=localStorage.getItem("db_last_ab_test_report"),i=this;if(a){var l=(new Date()-new Date(parseInt(a,10)))/60000;if(l<60){return}};if(e){var n=e}
else{var n=this.loadUserId({"mode":"cross_domain_id"})};if(!r){r=["main"]};var o="https://api.databreakers.com/v1/mall_si/abtests/users/"+n+"/",s=function(e){try{if(e.readyState===e.DONE&&e.status===200){localStorage.setItem("db_abtests",e.responseText);if(runDataGatherer.getConfig()["events"]["groups"][0]["handler"].indexOf("runAbTestGroupReportingToGa")<0){localStorage.setItem("db_last_ab_test_report",Date.now())}}
else{i.errorHandler({},"saveAbTestGroupToLocalStorage (abtests api response) 1, xhr.status: "+e.status+", xhr.readyState: "+e.readyState+", xhr.responseText: "+e.responseText)}}catch(t){i.errorHandler(t,"saveAbTestGroupToLocalStorage (abtests api response) 2, xhr.status: "+e.status+", xhr.readyState: "+e.readyState+", xhr.responseText: "+e.responseText)}};this.makeCorsRequest({"abtestTypes":r},o,"POST",s,!0)}catch(t){this.errorHandler(t,"saveAbTestGroupToLocalStorage")}},runAbTestGroupReportingToGa:function(e,r,n,a,i,o){try{this.saveAbTestGroupToLocalStorage(a,o);var s=localStorage.getItem("db_last_ab_test_report"),u=this;if(!n&&n!=0){n=600};if(s){var d=(new Date()-new Date(parseInt(s)))/1000;if(d<n){return}};var l=function(){try{if(e&&r){var a=e,o=r}
else{var n=JSON.parse(localStorage.getItem("db_abtests"));for(var s in n){if(n[s]["type"]=="main"){var a=n[s]["id"],o=n[s]["tags"].join(",");break}}};if(a&&o){var l=i?i:window.ga;o.split(",").forEach(function(e){l.getAll()[0].send({"hitType":"event","eventCategory":"databreakers_reporting","eventLabel":a,"eventAction":e,"nonInteraction":1})})}}catch(t){u.errorHandler(t,"runAbTestGroupReportingToGa runReport")}},c=setInterval(function(){if((window.hasOwnProperty("ga")&&window.ga.hasOwnProperty("getAll"))||(i&&i.hasOwnProperty("getAll"))){clearInterval(c);l();localStorage.setItem("db_last_ab_test_report",Date.now())}},300)}catch(t){this.errorHandler(t,"runAbTestGroupReportingToGa")}},runSpyReportingToGa:function(e,r,n){var a=this;try{this.spyReportingToGaCallbacks.push({"eventAction":e,"callback":r});if(this.spyReportingToGaCallbacks.length>1)return;var i=function(){try{(function(e){var s,i,n=function(t){if(e=null,!t.callback||"function"!=typeof t.callback)throw new Error("["+t.debugLogPrefix+"] Aborting; No listener callback provided.");return t.gaObjName=t.gaObjName||window.GoogleAnalyticsObject||"ga",t.debug=!!t.debug,t.debugLogPrefix=t.debugLogPrefix||"gaSpy",t}("function"==typeof e?{callback:e}:e),a=n.gaObjName,t=window[a],r=window.console&&n.debug?function(){var e=[].slice.call(arguments);e.unshift("["+n.debugLogPrefix+"]"),console.log.apply(console,e)}:function(){},l=function(e){var a,i={args:e,the:{}},t=i.the;return n.debug&&function(t,n){for(t="Intercepted: ga(",n=0;n<e.length;n++)t+="string"==typeof e[n]?"\""+e[n]+"\"":e[n],n+1<e.length&&(t+=", ");t+=")",r(t)}(),"function"==typeof e[0]?t.callback=e[0]:e[0]&&e[0].split&&(a=e[0].split("."),t.trackerName=a.length>1?a[0]:"t0",t.command=a.length>1?a[1]:a[0],a=a[a.length-1].split(":"),t.pluginName=a.length>1?a[0]:void 0,t.pluginMethodName=a.length>1?a[1]:void 0,"require"===t.command||"provide"===t.command?(t.pluginName=e[1],"provide"===t.command&&(t.pluginConstructor=e[2])):("send"===t.command&&(t.hitType=e[e.length-1].hitType||e[1]),"object"==typeof e[e.length-1]&&(t.trackerName=e[e.length-1].name||t.trackerName))),r("Run listener callback",t),!1!==n.callback(i)||(r("Block hit")||!1)},o=function(){var t=[].slice.call(arguments);if(n.debug){if(!l(t))return}
else try{if(!l(t))return}catch(e){};return o._gaOrig.apply(o._gaOrig,t)},c=function(){var e,t=o._gaOrig=window[a];r("Hijack",t._gaOrig?"(already hijacked)":""),window[a]=o;for(e in t)t.hasOwnProperty(e)&&(window[a][e]=t[e])};if(r("Config:",n),t||(r("Instantiate GA command queue"),t=window[a]=function(){(window[a].q=window[a].q||[]).push(arguments)},t.l=1*new Date),t.getAll)r("GA already loaded; cannot see previous commands"),c();else{if(!t.l)throw new Error("["+n.debugLogPrefix+"] Aborting; `"+a+"` not the GA object.");if(r("Command queue instantiated, but library not yet loaded"),t.q&&t.q.length){for(r("Applying listener to",t.q.length," queued commands"),s=[],i=0;i<t.q.length;i++)l([].slice.call(t.q[i]))&&s.push(t.q[i]);t.q=s}
else t.q=[];t(c),c()}})(function(e){if(e.args.length>=2&&e.args[1].hasOwnProperty("eventAction")){a.spyReportingToGaCallbacks.forEach(function(t){if(e.args[1]["eventAction"]==t["eventAction"]&&typeof t["callback"]=="function"){t["callback"](e)}})}})}catch(e){a.errorHandler(e,"runSpyReportingToGa runReporting callback")}},o=setInterval(function(){if((window.hasOwnProperty("ga")&&window["ga"].hasOwnProperty("getAll"))||n){i();clearInterval(o)}},300)}catch(t){this.errorHandler(t,"runSpyReportingToGa")}}};function HashMap(e){this.current=undefined;this.size=0;if(e===!1)this.disableLinking()};HashMap.noop=function(){return this};HashMap.illegal=function(){throw new Error("illegal operation for maps without linking")};HashMap.from=function(e,t){var n=new HashMap;for(var r in e){if(t||e.hasOwnProperty(r))n.set(r,e[r])};return n};HashMap.prototype.disableLinking=function(){this.link=HashMap.noop;this.unlink=HashMap.noop;this.disableLinking=HashMap.noop;this.next=HashMap.illegal;this.key=HashMap.illegal;this.value=HashMap.illegal;this.removeAll=HashMap.illegal;return this};HashMap.prototype.hash=function(e){return(typeof e)+" "+(e instanceof Object?(e.__hash||(e.__hash=++arguments.callee.current)):e.toString())};HashMap.prototype.hash.current=0;HashMap.prototype.get=function(e){var t=this[this.hash(e)];return t===undefined?undefined:t.value};HashMap.prototype.set=function(e,t){var r=this.hash(e);if(this[r]===undefined){var n={key:e,value:t};this[r]=n;this.link(n);++this.size}
else this[r].value=t;return this};HashMap.prototype.remove=function(e){var t=this.hash(e),r=this[t];if(r!==undefined){--this.size;this.unlink(r);delete this[t]};return this};HashMap.prototype.removeAll=function(){while(this.size)this.remove(this.key());return this};HashMap.prototype.link=function(e){if(this.size==0){e.prev=e;e.next=e;this.current=e}
else{e.prev=this.current.prev;e.prev.next=e;e.next=this.current;this.current.prev=e}};HashMap.prototype.unlink=function(e){if(this.size==0)this.current=undefined;else{e.prev.next=e.next;e.next.prev=e.prev;if(e===this.current)this.current=e.next}};HashMap.prototype.next=function(){this.current=this.current.next};HashMap.prototype.key=function(){return this.current.key};HashMap.prototype.value=function(){return this.current.value};var runIndividualizer={individualizerScriptId:"",individualizerLogLevel:"",element:{},nativeEvent:{},requestData:{},responseData:{},responseItem:{},responseVariant:{},responseVariantIndex:0,responseVariants:{},recommendations:{},totalResults:{},durations:{},requests:{},observers:{},config:{},pushStateCallbacks:[],replaceStateCallbacks:[],xhrCallbacks:[],lock:!1,idRequest:"",getConfig:function(){try{if(!this.config.hasOwnProperty("script_id")){var t={"script_id":"default","running":!1,"log_level":"warning","run_conditions":["!(new RegExp('AdsBot-Google')).test(navigator.userAgent);","!(new RegExp('Googlebot')).test(navigator.userAgent);","!(new RegExp('YandexMobileBot')).test(navigator.userAgent);","!(new RegExp('screenshot-generator')).test(navigator.userAgent);","localStorage.getItem('db_forced_ab_tests')"],"user_identification":"id","positions":{"category":{"type":"recommendation","running":!1,"run_condition":"","multiple":!0,"parent_of":[],"root_selector":{"mode":"css","selection":""},"run_handler":"","input_handler":"","output_handler":"","before_render_handler":"","empty_response_handler":"","events":[{"type":["DOMContentLoaded"],"selector":{"mode":"css","selection":""},"input_handler":"","timeout_handler":"","timeout":2000}],"item_attributes":{"attribute":{"property":"","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0}}},"category_top":{"type":"recommendation","running":!0,"run_condition":"","multiple":!0,"parent_of":[],"root_selector":{"mode":"css","selection":"#db_category_top"},"run_handler":"var css = runIndividualizer.createElementFromHTML(\"<style id='category_top_css'>.best-sellers__list:not(#db_category_top) {display: none}<\/style>\");document.getElementsByTagName('head')[0].appendChild(css);","input_handler":"console.log('ano');","output_handler":"","before_render_handler":"var el = runIndividualizer.createElementFromHTML(\"<div id='db_category_top' class='best-sellers__list' data-v-2f03a77e> <div class='best-sellers__item' data-v-2f03a77e=''> <div class='best-sellers__item__rank' data-v-2f03a77e=''> <span class='rank' data-v-2f03a77e='' style='background-color:#f2c464;'>1<\/span> <\/div><a class='best-sellers__item__link' data-v-2f03a77e='' href='\/nabijecky-mobilni-telefony\/samsung-usb-c-ep-ta20ebe-fast-charge-cerna'><div class='best-sellers__item__image' data-v-2f03a77e=''><img alt='Samsung USB-C EP-TA20EBE Fast Charge, \u010dern\u00e1' class='lazyload' data-sizes='auto' data-v-2f03a77e='' src='https:\/\/i.cdn.nrholding.net\/40341638\/100'><\/div><div class='item' data-v-2f03a77e=''><h3 class='item__title' data-v-2f03a77e=''>Samsung USB-C EP-TA20EBE Fast Charge, \u010dern\u00e1<\/h3><div class='item__description' data-v-2f03a77e=''>Rychl\u00e1 origin\u00e1ln\u00ed 15W cestovn\u00ed nab\u00edje\u010dka s&nbsp;kabelem USB\/USB-C, 2A, v&nbsp;\u010dern\u00e9&nbsp;barv\u011b.<\/div><div class='item__info' data-v-2f03a77e=''><div class='item__availability' data-v-2f03a77e=''><span class='item__available-text item__available' data-v-2f03a77e=''>Skladem<\/span><div class='rating-wrapper' data-testid='rating' data-v-2f03a77e=''><span class='rating-wrapper__count' data-testid='rating-count'>124x<\/span><\/div><\/div><div class='item__info__pricing' data-v-2f03a77e=''><del class='item__info__retail-small' data-v-2f03a77e=''>499 K\u010d<\/del><div class='item__info__current-small' data-v-2f03a77e=''>349 K\u010d<\/div><\/div><\/div><\/div><div class='item-price' data-v-2f03a77e=''><del class='item-price__retail' data-v-2f03a77e=''>499 K\u010d<\/del><div class='item-price__current' data-v-2f03a77e=''>349 K\u010d<\/div><\/div><\/a><\/div><\/div>\");if (!document.getElementById('db_category_top')) {document.querySelector('.best-sellers__list').parentElement.prepend(el);}","empty_response_handler":"var el = document.getElementById('category_top_css');if (el) {el.remove();}","events":[{"type":["DOMContentLoaded"],"selector":{"mode":"css","selection":".best-sellers__list"},"input_handler":"runIndividualizer.requestData.count = 3;","timeout_handler":"if (!runIndividualizer.recommendations.hasOwnProperty(runIndividualizer.idRequest)) {var el = document.getElementById('category_top_css');if (el) {el.remove();}}","timeout":2000},{"type":["pushState"],"selector":{"mode":"css","selection":""},"input_handler":"runIndividualizer.requestData.count = 3;","timeout_handler":"if (!runIndividualizer.recommendations.hasOwnProperty(runIndividualizer.idRequest)) {var el = document.getElementById('category_top_css');if (el) {el.remove();}}","observer":{"parent_selector":{"mode":"css","selection":"body"},"mutation_selector":{"mode":"css","selection":"div.sorting"}},"timeout":2000}],"item_attributes":{"full_image_url":{"property":"src","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":"img"},"required":!0},"title_long":{"property":"innerHTML","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":".item__title"},"required":!0}}},"product_detail_accessories":{"type":"recommendation","running":!1,"run_condition":"dataLayer[0]['pageName'] == 'product-detail'","multiple":!0,"parent_of":[],"root_selector":{"mode":"css","selection":"#pd-carousels-wrapper"},"run_handler":"var el = document.getElementById('db_product_detail_css');if (!el) {var css = runIndividualizer.createElementFromHTML(\"<style id='db_product_detail_css'>#pd-access-and-rel {visibility: hidden}<\/style>\");document.getElementsByTagName('head')[0].appendChild(css);}","input_handler":"runIndividualizer.requestData.itemId = dataLayer[0]['productCode'];runIndividualizer.requestData.returnedAttributes = ['full_price'];","output_handler":"","before_render_handler":"runIndividualizer.lock = true;var items = {};if (!runIndividualizer.hasOwnProperty(\"productDetailCarouselClearing\")) {document.querySelector(\"#pd-access-and-rel\").innerHTML = \"<h2 class='related-product-heading'>Doporu\u010deno p\u0159\u00edmo pro V\u00e1s<\/h2> <div class='multi-carousel' id='pd-carousels-wrapper'> <div class='multi-carousel-switch'><\/div><\/div>\";document.querySelectorAll(\"#pd-carousels-wrapper .multi-carousel-switch a\").forEach(function(item) {item.remove();});document.querySelectorAll(\"#pd-carousels-wrapper .multi-carousel-item\").forEach(function(item) {item.remove();});runIndividualizer.productDetailCarouselClearing = true;runIndividualizer.listNum = 1;}runIndividualizer.responseData.forEach(function(item) {if (!items.hasOwnProperty(item[\"attributes\"][\"product_type2\"])) {items[item[\"attributes\"][\"product_type2\"]] = [];}var itemPrice = runIndividualizer.formatPrice(item[\"attributes\"][\"price_vat\"]);if (itemPrice == null) {itemPrice = runIndividualizer.formatPrice(item[\"attributes\"][\"full_price\"]);}items[item[\"attributes\"][\"product_type2\"]].push({\"id\": item[\"attributes\"][\"_customer_item_id\"],\"name\": item[\"attributes\"][\"productname\"],\"price\": itemPrice,\"url\": item[\"attributes\"][\"url\"],\"image\": item[\"attributes\"][\"imgurl\"]});});for (var category in items) {runIndividualizer.renderProducDetailCarousel({\"recommendation\": items[category]}, \"accessories\", category, runIndividualizer.listNum++);}var imageInterval = setInterval(function() {document.querySelectorAll(\"#pd-carousels-wrapper img\").forEach(function(item) {if (item.hasAttribute(\"style\")) {clearInterval(imageInterval);}item.setAttribute(\"style\", \"width: 120px; height: 120px; object-fit: scale-down;\");});}, 300);var el = document.getElementById('db_product_detail_css');if (el) {el.remove();}","empty_response_handler":"var el = document.getElementById('db_product_detail_css'); if (el) {el.remove();}","events":[{"type":["DOMContentLoaded"],"selector":{"mode":"css","selection":"#pd-access-and-rel"},"input_handler":"","timeout_handler":"var el = document.getElementById('db_product_detail_css'); if (el) {el.remove();}","timeout":2000}],"item_attributes":{"_customer_item_id":{"property":"data-id","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0},"imgurl":{"property":"data-image","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0},"price_vat":{"property":"data-price","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0},"product_type2":{"property":"data-category","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0},"productname":{"property":"data-name","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0},"url":{"property":"data-url","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0}}},"search":{"type":"recommendation","running":!1,"run_condition":"","multiple":!0,"parent_of":[],"root_selector":{"mode":"css","selection":""},"run_handler":"","input_handler":"","output_handler":"","before_render_handler":"","empty_response_handler":"","events":[{"type":["DOMContentLoaded"],"selector":{"mode":"css","selection":""},"input_handler":"","timeout_handler":"","timeout":2000}],"item_attributes":{"attribute":{"property":"","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0}}},"search_autocomplete":{"type":"recommendation","running":!1,"run_condition":"","multiple":!0,"parent_of":[],"root_selector":{"mode":"css","selection":""},"run_handler":"","input_handler":"","output_handler":"","before_render_handler":"","empty_response_handler":"","events":[{"type":["DOMContentLoaded"],"selector":{"mode":"css","selection":""},"input_handler":"","timeout_handler":"","timeout":2000}],"item_attributes":{"attribute":{"property":"","output_handler":"","run_condition":"","internal_selector":{"mode":"css","selection":""},"required":!0}}}}};this.config=JSON.parse(JSON.stringify(t))};return this.config}catch(e){this.errorHandler(e,"getConfig")}},getUrl:function(){return"https://individualizer.databreakers.com/v1/individualizer"},getVersion:function(){return 1624387063},errorHandler:function(e,r,n){try{if(["info","warning","error"].indexOf(this.individualizerLogLevel)>=0){var a=runDataGatherer.prepareOuput(runDataGatherer.getConfig(),!0);a["dataPoints"][0]["attributes"]["message_type"]="error";a["dataPoints"][0]["attributes"]["error_name"]=e.name;a["dataPoints"][0]["attributes"]["error_message"]="area: "+r+", "+e.message+", "+e.result;a["dataPoints"][0]["attributes"]["script_id"]=this.individualizerScriptId;a["dataPoints"][0]["attributes"]["script_version"]=this.getVersion();a["dataPoints"][0]["attributes"]["script_type"]="individualizer";if(n&&getPropertyNames(n).length!==0){a.dataPoints[0].attributes.original_request={"type":n.type,"method":n.method,"source_url":{"page":n.url}};if(n.hasOwnProperty("body")){a.dataPoints[0].attributes.original_request.body=JSON.stringify(n.body,null)}};var i=runDataGatherer.createCORSRequest("POST",runDataGatherer.getUrl());i.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();i.onerror=null;return!1};if(i){i.send(JSON.stringify(a))}}}catch(t){}},warningHandler:function(e,r,n,a,o,s){try{if(["info","warning"].indexOf(this.individualizerLogLevel)>=0){var i=runDataGatherer.prepareOuput(runDataGatherer.getConfig(),!0);i["dataPoints"][0]["attributes"]["message_type"]="warning";i["dataPoints"][0]["attributes"]["warning_type"]=r;i["dataPoints"][0]["attributes"]["warning_message"]=e;i["dataPoints"][0]["attributes"]["script_id"]=this.individualizerScriptId;i["dataPoints"][0]["attributes"]["script_version"]=this.getVersion();i["dataPoints"][0]["attributes"]["script_type"]="individualizer";if(n){i["dataPoints"][0]["attributes"]["request_duration_backend"]=n};if(a){i["dataPoints"][0]["attributes"]["request_duration_all"]=a};if(o){i["dataPoints"][0]["attributes"]["id_position"]=o};if(s){i["dataPoints"][0]["attributes"]["no_response_to_render_duration"]=s};var l=runDataGatherer.createCORSRequest("POST",runDataGatherer.getUrl());l.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();l.onerror=null;return!1};if(l){l.send(JSON.stringify(i))}}}catch(t){}},infoHandler:function(e,r,n,a,s){try{if(["info","warning","error"].indexOf(this.individualizerLogLevel)>=0){var i=runDataGatherer.prepareOuput(runDataGatherer.getConfig());i["dataPoints"][0]["attributes"]["message_type"]="info";i["dataPoints"][0]["attributes"]["info_type"]=r;i["dataPoints"][0]["attributes"]["info_message"]=e;i["dataPoints"][0]["attributes"]["request_duration_backend"]=n;i["dataPoints"][0]["attributes"]["request_duration_all"]=a;i["dataPoints"][0]["attributes"]["id_position"]=s;i["dataPoints"][0]["attributes"]["script_id"]=this.individualizerScriptId;i["dataPoints"][0]["attributes"]["script_version"]=this.getVersion();i["dataPoints"][0]["attributes"]["script_type"]="individualizer";var o=runDataGatherer.createCORSRequest("POST",runDataGatherer.getUrl());o.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();o.onerror=null;return!1};if(o){o.send(JSON.stringify(i))}}}catch(t){var i={"dataPoints":[{"attributes":{"script_id":this.individualizerScriptId,"script_version":this.getVersion(),"config_version":runDataGatherer.getVersionOfConfig(),"script_type":"individualizer","source_url":{"page":location.href},"user_agent":navigator.userAgent,"message_type":"info","info_type":r,"info_message":e}}]};var o=runDataGatherer.createCORSRequest("POST",runDataGatherer.getUrl());o.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();o.onerror=null;return!1};if(o){o.send(JSON.stringify(i))}}},initPolyfills:function(){try{if("document" in self){if(!("classList" in document.createElement("_"))||document.createElementNS&&!("classList" in document.createElementNS("http://www.w3.org/2000/svg","g"))){(function(e){"use strict";if(!("Element" in e))return;var s="classList",r="prototype",l=e.Element[r],i=Object,h=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},p=Array[r].indexOf||function(e){var t=0,r=this.length;for(;t<r;t++){if(t in this&&this[t]===e){return t}};return-1},c=function(e,t){this.name=e;this.code=DOMException[e];this.message=t},a=function(e,t){if(t===""){throw new c("SYNTAX_ERR","The token must not be empty.")};if(/\s/.test(t)){throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.")};return p.call(e,t)},d=function(e){var r=h.call(e.getAttribute("class")||""),n=r?r.split(/\s+/):[],t=0,a=n.length;for(;t<a;t++){this.push(n[t])};this._updateClassName=function(){e.setAttribute("class",this.toString())}},n=d[r]=[],u=function(){return new d(this)};c[r]=Error[r];n.item=function(e){return this[e]||null};n.contains=function(e){return~a(this,e+"")};n.add=function(){var t=arguments,r=0,i=t.length,e,n=!1;do{e=t[r]+"";if(!~a(this,e)){this.push(e);n=!0}}
while(++r<i);if(n){this._updateClassName()}};n.remove=function(){var r=arguments,n=0,o=r.length,t,i=!1,e;do{t=r[n]+"";e=a(this,t);while(~e){this.splice(e,1);i=!0;e=a(this,t)}}
while(++n<o);if(i){this._updateClassName()}};n.toggle=function(e,t){var r=this.contains(e),n=r?t!==!0&&"remove":t!==!1&&"add";if(n){this[n](e)};if(t===!0||t===!1){return t}
else{return!r}};n.replace=function(e,t){var r=a(e+"");if(~r){this.splice(r,1,t);this._updateClassName()}};n.toString=function(){return this.join(" ")};if(i.defineProperty){var o={get:u,enumerable:!0,configurable:!0};try{i.defineProperty(l,s,o)}catch(t){if(t.number===undefined||t.number===-0x7FF5EC54){o.enumerable=!1;i.defineProperty(l,s,o)}}}
else if(i[r].__defineGetter__){l.__defineGetter__(s,u)}}(self))}(function(){"use strict";var e=document.createElement("_");e.classList.add("c1","c2");if(!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var r,n=arguments.length;for(r=0;r<n;r++){e=arguments[r];t.call(this,e)}}};t("add");t("remove")};e.classList.toggle("c3",!1);if(e.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){if(1 in arguments&&!this.contains(e)===!t){return t}
else{return r.call(this,e)}}};if(!("replace" in document.createElement("_").classList)){DOMTokenList.prototype.replace=function(e,t){var r=this.toString().split(" "),n=r.indexOf(e+"");if(~n){r=r.slice(n);this.remove.apply(this,r);this.add(t);this.add.apply(this,r.slice(1))}}};e=null}())}(function(e,t){"use strict";var n="amd",r="exports";if(typeof define==="function"&&define[n]){define(function(){return t(e)})}
else if(typeof module==="function"&&module[r]){module[r]=t(e)}
else{t(e)}}(this,function(){"use strict";var o,s,r,d,u,l=window.document,n,h,c,a,e=l.createElement("_"),t="DOMAttrModified";function f(e){delete e.target._datasetCache};function m(e){return e.replace(d,function(e,t){return t.toUpperCase()})};function p(){var e={};s=this.attributes;for(r=0,h=s.length;r<h;r+=1){o=s[r];c=o.name.match(u);if(c){e[m(c[1])]=o.value}};return e};function i(){if(n){e.removeEventListener(t,i,!1)}
else{e.detachEvent("on"+t,i)};a=!0};if(e.dataset!==undefined){return};d=/\-([a-z])/ig;u=/^data\-(.+)/;n=!!l.addEventListener;a=!1;if(n){e.addEventListener(t,i,!1)}
else{e.attachEvent("on"+t,i)};e.setAttribute("foo","bar");Object.defineProperty(window.Element.prototype,"dataset",{get:a?function(){if(!this._datasetCache){this._datasetCache=p.call(this)};return this._datasetCache}:p});if(a&&n){l.addEventListener(t,f,!1)}}));(function(e){e.forEach(function(e){if(e.hasOwnProperty("remove")){return};Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]);(function(e){e.forEach(function(e){if(e.hasOwnProperty("prepend")){return};Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var r=t instanceof Node;e.appendChild(r?t:document.createTextNode(String(t)))});this.insertBefore(e,this.firstChild)}})})})([Element.prototype,Document.prototype,DocumentFragment.prototype])}catch(e){this.errorHandler(e,"initPolyfills")}},getElements:function(e,r,n){try{if(!r)return[n];if(e==="xpath"){return runDataGatherer.selectElements(r,n)}
else{return Array.prototype.slice.call(n.querySelectorAll(r))}}catch(t){this.errorHandler(t,"getElements")}},initListening:function(e){try{var a={};for(var s in e["positions"]){if(!e["positions"][s]["running"])continue;if(e["positions"][s]["run_condition"]){if(!eval(e["positions"][s]["run_condition"]))continue};for(var i in e["positions"][s]["events"]){for(var m in e["positions"][s]["events"][i]["type"]){var r=e["positions"][s]["events"][i]["type"][m];if(r!=="DOMContentLoaded"){var o=e["positions"][s],n=o["events"][i]["selector"],d=o["events"][i]["timeout"],u=o["events"][i]["timeout_handler"],h=o["events"][i].hasOwnProperty("input_handler")?o["events"][i]["input_handler"]:null,p=o["events"][i].hasOwnProperty("observer")?o["events"][i]["observer"]:null,f=o["events"][i].hasOwnProperty("run_condition")?o["events"][i]["run_condition"]:"";if(!a.hasOwnProperty(r)){a[r]={}};if(!a[r].hasOwnProperty(n["mode"])){a[r][n["mode"]]={}};if(!a[r][n["mode"]].hasOwnProperty(n["selection"])){a[r][n["mode"]][n["selection"]]={}};if(!a[r][n["mode"]][n["selection"]].hasOwnProperty(s)){a[r][n["mode"]][n["selection"]][s]={"runCondition":f,"position":o,"timeout":d,"timeoutHandler":u,"eventHandler":h,"eventObserver":p}}}}}};for(var r in a){for(var l in a[r]){for(var c in a[r][l]){var n={"mode":l,"selection":c};this.setListeningCallback(e,r,a[r][l][c],n)}}}}catch(t){this.errorHandler(t,"initListening")}},setListeningCallback:function(e,n,t,i){var a=this;try{if(n==="popstate"){var o=function(){try{var i=[],l={};var s={};var o={};for(var n in t){if(!t[n]["position"]["running"])continue;if(t[n]["position"]["run_condition"].length){if(!eval(t[n]["position"]["run_condition"])){continue}};if(t[n]["runCondition"].length){if(!eval(t[n]["runCondition"])){continue}};a.lock=!1;a.requestData={};eval(t[n]["eventHandler"]);eval(t[n]["position"]["input_handler"]);if(a.lock)continue;i.push(a.prepareRequest(n,a.requestData,t[n]["position"]["item_attributes"],e));l[n]=t[n]["timeout"];s[n]=t[n]["timeoutHandler"];o[n]=t[n]["eventObserver"]};if(!i.length)return;a.sendBatchRequest(i,e,l,s,o)}catch(r){a.errorHandler(r,"initListening popstate callback")}};window.addEventListener(n,o,!0)};if(n==="pushState"){var o=function(){try{var i=[],l={};var s={};var o={};for(var n in t){if(!t[n]["position"]["running"])continue;if(t[n]["position"]["run_condition"].length){if(!eval(t[n]["position"]["run_condition"])){continue}};if(t[n]["runCondition"].length){if(!eval(t[n]["runCondition"])){continue}};a.lock=!1;a.requestData={};eval(t[n]["eventHandler"]);eval(t[n]["position"]["input_handler"]);if(a.lock)continue;i.push(a.prepareRequest(n,a.requestData,t[n]["position"]["item_attributes"],e));l[n]=t[n]["timeout"];s[n]=t[n]["timeoutHandler"];o[n]=t[n]["eventObserver"]};if(!i.length)return;a.sendBatchRequest(i,e,l,s,o)}catch(r){a.errorHandler(r,"initListening pushState callback")}};if(this.pushStateCallbacks.length==0){var d=history.pushState;history.pushState=function(){d.apply(this,arguments);a.pushStateCallbacks.forEach(function(e){e()})}};this.pushStateCallbacks.push(o)};if(n==="replaceState"){var o=function(){try{var i=[],l={};var s={};var o={};for(var n in t){if(!t[n]["position"]["running"])continue;if(t[n]["position"]["run_condition"].length){if(!eval(t[n]["position"]["run_condition"])){continue}};if(t[n]["runCondition"].length){if(!eval(t[n]["runCondition"])){continue}};a.lock=!1;a.requestData={};eval(t[n]["eventHandler"]);eval(t[n]["position"]["input_handler"]);if(a.lock)continue;i.push(a.prepareRequest(n,a.requestData,t[n]["position"]["item_attributes"],e));l[n]=t[n]["timeout"];s[n]=t[n]["timeoutHandler"];o[n]=t[n]["eventObserver"]};if(!i.length)return;a.sendBatchRequest(i,e,l,s,o)}catch(r){a.errorHandler(r,"initListening replaceState callback")}};if(this.replaceStateCallbacks.length==0){var c=history.replaceState;history.replaceState=function(){c.apply(this,arguments);a.replaceStateCallbacks.forEach(function(e){e()})}};this.replaceStateCallbacks.push(o)};if(n==="xhr"){var o=function(r){try{var o=[],c={};var l={};var s={};for(var i in t){if(!t[i]["position"]["running"])continue;if(t[i]["position"]["run_condition"].length){if(!eval(t[i]["position"]["run_condition"])){continue}};if(t[i]["runCondition"].length){if(!eval(t[i]["runCondition"])){continue}};a.nativeEvent=r;a.lock=!1;a.requestData={};eval(t[i]["eventHandler"]);eval(t[i]["position"]["input_handler"]);if(a.lock)continue;o.push(a.prepareRequest(i,a.requestData,t[i]["position"]["item_attributes"],e));c[i]=t[i]["timeout"];l[i]=t[i]["timeoutHandler"];s[i]=t[i]["eventObserver"]};if(!o.length)return;a.sendBatchRequest(o,e,c,l,s)}catch(n){a.errorHandler(n,"initListening xhr callback")}};if(this.xhrCallbacks.length==0){var l=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.send=function(){var e=l.apply(this,[].slice.call(arguments)),t=arguments;a.xhrCallbacks.forEach(function(e){e(t)});return e}};this.xhrCallbacks.push(o)};if(n==="inview"){var o=function(r){try{var o=[],c={};var l={};var s={};a.element=r;for(var i in t){if(!t[i]["position"]["running"])continue;if(t[i]["position"]["run_condition"].length){if(!eval(t[i]["position"]["run_condition"])){continue}};if(t[i]["runCondition"].length){if(!eval(t[i]["runCondition"])){continue}};a.lock=!1;a.requestData={};eval(t[i]["eventHandler"]);eval(t[i]["position"]["input_handler"]);if(a.lock)continue;o.push(a.prepareRequest(i,a.requestData,t[i]["position"]["item_attributes"],e));c[i]=t[i]["timeout"];l[i]=t[i]["timeoutHandler"];s[i]=t[i]["eventObserver"]};if(!o.length)return;a.sendBatchRequest(o,e,c,l,s)}catch(n){a.errorHandler(n,"initListening inview callback")}},s=function(){var e=[];if(i["mode"]==="xpath"){e=runDataGatherer.selectElements(i["selection"])}
else{e=Array.prototype.slice.call(document.querySelectorAll(i["selection"]))};return e};runDataGatherer.appear({appear:o,bounds:0,getElements:s})};if(["popstate","pushState","replaceState","xhr","inview"].indexOf(n)<0){var o=function(r){try{var h=[],m={};var f={};var p={};var c=[],u;if(i["mode"]==="xpath"){c=runDataGatherer.selectElements(i["selection"])}
else{c=Array.prototype.slice.call(document.querySelectorAll(i["selection"]))};for(var d=0;d<c.length;d++){var s;if(r.hasOwnProperty("path")&&Array.isArray(r.path)&&r.path.length>2){s=r.path}
else{s=[];var l=r.target;while(l){s.push(l);l=l.parentElement};if(s.indexOf(window)===-1&&s.indexOf(document)===-1){s.push(document)};if(s.indexOf(window)===-1){s.push(window)}};u=s.indexOf(c[d]);if(u<0)continue;a.nativeEvent=r;a.element=s[u];for(var o in t){if(!t[o]["position"]["running"])continue;if(t[o]["position"]["run_condition"].length){if(!eval(t[o]["position"]["run_condition"])){continue}};if(t[o]["runCondition"].length){if(!eval(t[o]["runCondition"])){continue}};a.lock=!1;a.requestData={};eval(t[o]["eventHandler"]);eval(t[o]["position"]["input_handler"]);if(a.lock)continue;h.push(a.prepareRequest(o,a.requestData,t[o]["position"]["item_attributes"],e));m[o]=t[o]["timeout"];f[o]=t[o]["timeoutHandler"];p[o]=t[o]["eventObserver"]};if(!h.length)return;a.sendBatchRequest(h,e,m,f,p);break}}catch(n){a.errorHandler(n,"initListening callback")}};document.addEventListener(n,o,!0)}}catch(r){this.errorHandler(r,"setListeningCallback")}},main:function(){try{var r=this.getConfig();this.individualizerScriptId=r["script_id"];this.individualizerLogLevel=r["log_level"];this.setLocalStorage();if(r["running"]&&runDataGatherer.resolveRunConditions(r["run_conditions"])){var d=[],u={};var c={};var l={};var s={};var i=!1,o="noPosition";if(r.hasOwnProperty("variables")){eval(r["variables"])};if(r.hasOwnProperty("declarations")){eval(r["declarations"])};for(var a in r["positions"]){this.requestData={};var t=r["positions"][a];o=a;if(!t["running"])continue;if(t["run_condition"]&&!eval(t["run_condition"]))continue;if(t["run_handler"])eval(t["run_handler"]);loop1:for(var n in t["events"]){loop2:for(var h in t["events"][n]["type"]){if(t["events"][n]["type"][h]==="DOMContentLoaded"){if(t["events"][n].hasOwnProperty("run_condition")&&!eval(t["events"][n]["run_condition"]))continue;this.lock=!1;eval(t["events"][n]["input_handler"]);eval(t["input_handler"]);if(this.lock)break loop1;d.push(this.prepareRequest(a,this.requestData,t["item_attributes"],r));u[a]=t["events"][n]["timeout"];c[a]=t["events"][n]["timeout_handler"];l[a]=t["events"][n].hasOwnProperty("observer")?t["events"][n]["observer"]:null;s[a]=t["events"][n]["selector"];i=!0;break loop1}}}};if(i)this.sendBatchRequest(d,r,u,c,l,s);this.initListening(r);this.initGarbageCollector()}}catch(e){this.errorHandler(e,"main, position: "+o)}},prepareRequest:function(e,r,a,o){try{var d=e.split("#"),c=d[d.length-1].split("@")[0],i={"requestId":e,"request":{"template":{"templateId":c},"returnedAttributes":[]}};if(o["positions"][e].hasOwnProperty("importance")){i["importance"]=o["positions"][e]["importance"]};if(localStorage.getItem("db_forced_ab_tests")){var u=JSON.parse(localStorage.getItem("db_forced_ab_tests"));i.request["abTests"]={"forcedAbTests":u}};if(getPropertyNames(r).length!==0){for(var n in r){if(n=="count"){i.request.template.count=r[n];continue};if(n=="filter"){i.request.template.filter=r[n];continue};if(n=="booster"){i.request.template.booster=r[n];continue};if(n=="details"){i.request.template.details=r[n];continue};i.request[n]=r[n]}};if(localStorage.getItem("db_forced_templates")){var l=JSON.parse(localStorage.getItem("db_forced_templates"));if(l.hasOwnProperty("all")){for(var n in l["all"]){i.request.template[n]=l["all"][n]}};if(l.hasOwnProperty(c)){for(var n in l[c]){i.request.template[n]=l[c][n]}}};for(var n in a){if(a[n]["run_condition"].length){if(eval(a[n]["run_condition"])){i["request"]["returnedAttributes"].push(n);if(a[n]["required"]){var s="";if(i.request.template.hasOwnProperty("filter")){s+=i.request.template.filter+" AND "};s+=n+" is not null";i.request.template.filter=s}}}
else{i["request"]["returnedAttributes"].push(n);if(a[n]["required"]){var s="";if(i.request.template.hasOwnProperty("filter")){s+=i.request.template.filter+" AND "};s+=n+" is not null";i.request.template.filter=s}}};return i}catch(t){this.errorHandler(t,"prepareRequest")}},sendBatchRequest:function(e,r,n,i,c,d){try{var a=this,u=new Date().getTime(),w=function(e){try{if(e.readyState===e.DONE&&e.status===200){var o=JSON.parse(e.responseText),f=(new Date().getTime())-u;if(o&&o!==null&&typeof o==="object"){for(var i in o["responses"]){var h=o["responses"][i]["response"]["recommendations"],s=i+"#"+u,p=o["responses"][i]["response"]["totalResults"];if(h.length>0){a.durations[s]={"requestDurationBackend":o["durationMs"],"requestDurationAll":f};if(p){a.totalResults[s]=p};a.saveRecommendations(s,h)}
else{eval(r["positions"][i]["empty_response_handler"]);var l="Not possible to apply the recommendations of "+i+", because no recommendations receieved.";a.warningHandler(l,"empty_response")};var m=n.hasOwnProperty(i)?n[i]:null,g=c.hasOwnProperty(i)?c[i]:null,v=d&&d.hasOwnProperty(i)?d[i]:null;if(!g){a.resolveIndividualization(s,u,m,!1,v)};if(r["log_level"]=="info"){a.infoHandler("","requestDuration",o["durationMs"],f,i)}}}
else{var l="Not possible to apply the recommendations, because no recommendations received.";a.warningHandler(l,"empty_response")}}
else{a.errorHandler("xhr.status: "+e.status,"sendBatchRequest callback")}}catch(t){a.errorHandler(t,"sendBatchRequest callback")}},l={};l["accountId"]=runDataGatherer.getAccountId();l["data"]=runDataGatherer.prepareOuput(runDataGatherer.getConfig());l["data"]["dataPoints"][0]["attributes"]["script_type"]="individualizer";l["data"]["dataPoints"][0]["attributes"]["script_version"]=this.getVersion();var m=l["data"].dataPoints[0]["attributes"]["user_identification"];if(m.hasOwnProperty(r["user_identification"])){for(var s=0;s<e.length;s++){e[s]["request"]["userId"]=m[r["user_identification"]]}}
else{for(var s=0;s<e.length;s++){e[s]["request"]["userId"]=m["id"]}};var f=[],h=[];for(var s=0;s<e.length;s++){var o=e[s]["request"]["template"]["templateId"],g=r["positions"][o]["type"],v=o+"#"+u,y=i.hasOwnProperty(o)?i[o]:null,p=n.hasOwnProperty(o)?n[o]:null,b=c.hasOwnProperty(o)?c[o]:null;if(y&&p){(function(e,t,r){setTimeout(function(){try{if(a.isThereYoungerRequest(r))return;eval("runIndividualizer.idRequest = '"+r+"'; "+t)}catch(n){a.errorHandler(n,"timeoutHandler of "+e)}},p)})(o,y,v)};if(b){(function(e,t,r,n,i){var d=function(i,o){if(e.hasOwnProperty("mutation_selector")){var u=e["mutation_selector"],s=a.getElements(u["mode"],u["selection"],document),l=!1;for(var d in s){for(var c in i){if(Array.prototype.slice.call(i[c]["addedNodes"]).indexOf(s[d])>=0){l=!0};if(i[c]["target"]==s[d]){l=!0}}};if(!l)return};o.disconnect();if(e.hasOwnProperty("handler"))eval(e["handler"]);a.resolveIndividualization(t,r,n,!0,null)},o=e["parent_selector"];a.observers[t]=new MutationObserver(d);var s=a.getElements(o["mode"],o["selection"],document);if(!s.length){var l=i+" (observerSelector, mode: "+o["mode"]+", selection: "+o["selection"]+")",c="Not possible to apply the observer to: "+l+", because element does not exist.";a.warningHandler(c,"element_missing");return};a.observers[t].observe(s[0],{childList:!0,subtree:!0})})(b,v,u,p,o)};if(g=="recommendation"){f.push(e[s])};if(g=="individualizer"){h.push(e[s])};if(!this.requests.hasOwnProperty(o)){this.requests[o]=[]};this.requests[o].push(u)};if(f.length>0){l["recommendation_request"]={};l["recommendation_request"]["requests"]=f;l["recommendation_request"]["uniqueRecommendations"]=!0;l["recommendation_request"]["importanceType"]="priority";if(h.length==0){l["synchronous"]=!1}};if(h.length>0){l["individualizer_request"]={};l["individualizer_request"]["requests"]=h};runDataGatherer.makeCorsRequest(l,this.getUrl(),"POST",w,!0)}catch(t){this.errorHandler(t,"sendBatchRequest")}},saveRecommendations:function(e,r){try{if(this.recommendations.hasOwnProperty(e)){var n="It was impossible to save the recommendations because the request id '"+e+"' was duplicated.";this.warningHandler(n,"duplicate_request_id")}
else{this.recommendations[e]=r}}catch(t){this.errorHandler(t,"saveRecommendations")}},loadRecommendations:function(e){try{if(this.recommendations.hasOwnProperty(e)){return this.recommendations[e]};return!1}catch(t){this.errorHandler(t,"loadRecommendations")}},applyRecommendations:function(e){try{var m=e.split("#")[0],A=this.getConfig(),a=A["positions"][m];this.responseData=this.loadRecommendations(e);this.idRequest=e;this.lock=!1;var x="before_render_handler";eval(a["before_render_handler"]);x="under before_render_handler";if(this.lock)return;var w=this.responseData,s=this,o=this.getElements(a["root_selector"]["mode"],a["root_selector"]["selection"],document);if(!o.length){var l=m+", mode: "+a["root_selector"]["mode"]+", selection: "+a["root_selector"]["selection"],c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");return};var h=o[0],E=h.children[0].cloneNode(!0);if(a["multiple"]){var b=h.dataset.offset?parseInt(h.dataset.offset):0,P=h.children;if(P.length<b){b=P.length-w.length};for(var u=0;u<w.length;u++){u=parseInt(u);var d=w[u]["attributes"];this.responseItem=d;this.responseItem["itemId"]=w[u]["itemId"];var C=Object.keys(d),n=Object.keys(a["item_attributes"]),H={};for(var r=0;r<n.length;r++){if(a["item_attributes"][n[r]].hasOwnProperty("cloning_selector")){var y=JSON.parse(d[n[r]]);if(y.length>0){H[n[r]]=y}}};this.responseVariants=H;if(P.length<b+u+1)h.appendChild(E.cloneNode(!0));for(var r=0;r<n.length;r++){if(C.indexOf(n[r])<0)continue;x=n[r];if(n[r].indexOf("parameters::")>=0){var v=d["parameters"];for(var g in v){for(var S in v[g]){var f="parameters::"+g+"::"+S,i=a["item_attributes"][f]["internal_selector"],o=this.getElements(i["mode"],i["selection"],h.children[b+u]);this.responseData=v[g][S];if(!o.length){var l=m+" (internalSelector, mode: "+i["mode"]+", selection: "+i["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};o.forEach(function(e){s.element=e;eval(a["item_attributes"][f]["output_handler"]);s.element[a["item_attributes"][f]["property"]]=s.responseData})}}}
else{if(a["item_attributes"][n[r]].hasOwnProperty("cloning_selector")){var k=a["item_attributes"][n[r]]["cloning_selector"],o=this.getElements(k["mode"],k["selection"],h.children[b+u]);if(!o.length){var l=m+" (cloningSelector, mode: "+k["mode"]+", selection: "+k["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};var y=JSON.parse(d[n[r]]);if(y!=null&&y.constructor===Array){for(var p=0;p<y.length;p++){if(o.length<p+1){o[p]=o[0].cloneNode(!0);o[0].parentElement.appendChild(o[p])};var i=a["item_attributes"][n[r]]["internal_selector"],O=this.getElements(i["mode"],i["selection"],o[p]);this.responseData=y[p];this.responseVariantIndex=p;for(var D in this.responseVariants){this.responseVariant[D]=this.responseVariants[D][p]};if(!O.length){var l=m+" (internalSelector, mode: "+i["mode"]+", selection: "+i["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};O.forEach(function(e){s.element=e;eval(a["item_attributes"][n[r]]["output_handler"]);s.element[a["item_attributes"][n[r]]["property"]]=s.responseData})}}}
else{var i=a["item_attributes"][n[r]]["internal_selector"],o=this.getElements(i["mode"],i["selection"],h.children[b+u]);this.responseData=d.hasOwnProperty(n[r])?d[n[r]]:null;if(!o.length){var l=m+" (internalSelector, mode: "+i["mode"]+", selection: "+i["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};o.forEach(function(e){s.element=e;eval(a["item_attributes"][n[r]]["output_handler"]);s.element[a["item_attributes"][n[r]]["property"]]=s.responseData})}}}}}
else{var d=w[0]["attributes"],C=Object.keys(d),n=Object.keys(a["item_attributes"]);for(var r=0;r<n.length;r++){if(C.indexOf(n[r])<0)continue;x=n[r];if(n[r].indexOf("parameters::")>=0){var v=d["parameters"];for(var g in v){for(var S in v[g]){var f="parameters::"+g+"::"+S;x=f;var i=a["item_attributes"][f]["internal_selector"],o=this.getElements(i["mode"],i["selection"],h);this.responseData=v[g][S];if(!o.length){var l=m+" (internalSelector, mode: "+i["mode"]+", selection: "+i["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};o.forEach(function(e){s.element=e;s.element[a["item_attributes"][f]["property"]]=s.responseData;eval(a["item_attributes"][f]["output_handler"])})}}}
else{var i=a["item_attributes"][n[r]]["internal_selector"],o=this.getElements(i["mode"],i["selection"],h);this.responseData=d.hasOwnProperty(n[r])?d[n[r]]:null;if(!o.length){var l=m+" (internalSelector, mode: "+i["mode"]+", selection: "+i["selection"]+")",c="Not possible to apply the recommendation to: "+l+", because element does not exist.";this.warningHandler(c,"element_missing");continue};o.forEach(function(e){s.element=e;eval(a["item_attributes"][n[r]]["output_handler"]);s.element[a["item_attributes"][n[r]]["property"]]=s.responseData})}}};this.responseData=w;x="output_handler";eval(a["output_handler"])}catch(t){this.errorHandler(t,"applyRecommendations "+x)}},resolveIndividualization:function(e,r,n,a,i){try{var c=this,s=e.split("#")[0];if(this.isThereYoungerRequest(e))return;if(n&&((n-(new Date().getTime()-r))<=0)){var o="area: resolveIndividualization, Not possible to apply the recommendation to: "+s+", because of timeout.";if(this.durations.hasOwnProperty(e)){this.warningHandler(o,"timeout",this.durations[e]["requestDurationBackend"],this.durations[e]["requestDurationAll"],s)}
else{this.warningHandler(o,"timeout",null,null,s,new Date().getTime()-r)};return};if(i){var d=this.getElements(i["mode"],i["selection"],document);if(!d.length){setTimeout(function(){c.resolveIndividualization(e,r,n,!1,i)},50);return}};var l=this.loadRecommendations(e);if(a){if(l){this.applyRecommendations(e)}
else{setTimeout(function(){c.resolveIndividualization(e,r,n,!0,i)},50)};return};if(l){this.applyRecommendations(e)}
else{var o="area: callback, Not possible to apply the recommendation to: "+s+", because no recommendations receieved.";this.warningHandler(o,"empty_response")}}catch(t){this.errorHandler(t,"resolveIndividualization")}},isThereYoungerRequest:function(e){try{var r=e.split("#")[0],n=parseInt(e.split("#")[1]),a=Math.max.apply(null,this.requests[r]);return a!==n}catch(t){this.errorHandler(t,"isThereYoungerRequest")}},formatPrice:function(e,r,n,a){try{if(!n)n=".";if(r){var i=Math.round(e).toFixed(2).split(".")}
else{var i=e.toFixed(2).split(".")};return i[0].split("").reverse().reduce(function(e,t,r,n){return t=="-"?e:t+(r&&!(r%3)?" ":"")+e},"")+(i[1]!=="00"?n+i[1]:a?n+"00":"")}catch(t){this.errorHandler(t,"formatPrice")}},initGarbageCollector:function(){try{var t=this;setInterval(function(){var o=new Date().getTime(),a={};for(var n in t.recommendations){var e=n.split("#")[0],r=parseInt(n.split("#")[1]);if(a.hasOwnProperty(e)){if(a[e]<r){a[e]=r}}
else{a[e]=r}};for(var n in t.recommendations){var e=n.split("#")[0],r=parseInt(n.split("#")[1]);if(a[e]==r){continue};if(r<(o-60000)){delete t.recommendations[e+"#"+r]}};for(var e in t.requests){var i=t.requests[e].length;while(i--){if(t.requests[e][i]<(o-60000)){t.requests[e].splice(i,1)}}}},60000)}catch(e){this.errorHandler(e,"initGarbageCollector")}},setLocalStorage:function(){var e=runDataGatherer.loadUrl({"mode":"specific","parameters":["db_ab_test_group"]})["parameters"]["db_ab_test_group"];if(!e)return;if(e=="remove"){localStorage.removeItem("db_forced_ab_tests")};if(e=="recommendation"){localStorage.setItem("db_forced_ab_tests","[{ \"abTestSelector\": { \"abTestType\": \"main\" }, \"groupSelector\": { \"abTestTags\": [ \"recommendation\" ] } }]")};if(e=="original"){localStorage.setItem("db_forced_ab_tests","[{ \"abTestSelector\": { \"abTestType\": \"main\" }, \"groupSelector\": { \"abTestTags\": [ \"original\" ] } }]")}},createElementFromHTML:function(e){try{var r=document.createElement("div");r.innerHTML=e.trim();return r.firstChild}catch(t){this.errorHandler(t,"createElementFromHTML")}}};runDataGatherer.initPolyfills();runDataGatherer.initInView();runIndividualizer.initPolyfills();runIndividualizer.main();runDataGatherer.main()}catch(e$){try{var output={"dataPoints":[{"attributes":{"source_url":{"page":location.href},"user_agent":navigator.userAgent,"message_type":"error","error_name":e$.name,"error_message":"area: "+area+", "+e$.message+", "+e$.result}}]};var xhr=new XMLHttpRequest();xhr.url="https://api.databreakers.com/v1/mall_si/dataPoint";xhr.method="POST";if("withCredentials" in xhr){xhr.open(xhr.method,xhr.url);xhr.type="XMLHttpRequest"}
else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(xhr.method,xhr.url);xhr.type="XDomainRequest"};xhr.setRequestHeader("Content-Type","text/plain;charset=utf-8");xhr.onerror=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();xhr.onerror=null;return!1};if(xhr){xhr.send(JSON.stringify(output))}}catch(e$){}};