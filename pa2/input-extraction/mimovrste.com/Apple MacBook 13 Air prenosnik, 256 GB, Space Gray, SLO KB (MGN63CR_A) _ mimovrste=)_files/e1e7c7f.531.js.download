(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1246:function(t,e,n){var o=n(732),r=n(1250),l=/&(?:amp|lt|gt|quot|#39);/g,c=RegExp(l.source);t.exports=function(t){return(t=o(t))&&c.test(t)?t.replace(l,r):t}},1249:function(t,e,n){"use strict";var o;n.d(e,"a",(function(){return o})),function(t){t.MOBILE="mobile",t.TABLET="tablet",t.DESKTOP="desktop"}(o||(o={}))},1250:function(t,e,n){var o=n(1251)({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});t.exports=o},1251:function(t,e){t.exports=function(object){return function(t){return null==object?void 0:object[t]}}},1254:function(t,e,n){var content=n(1271);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("38593a8c",content,!0,{sourceMap:!1})},1268:function(t,e,n){"use strict";n(15);var o=n(5),r=n(10),l=n(8),c=n(9),h=n(3),d=n(7),f=(n(12),n(37),n(0)),v=n(150);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(c.a)(this,n)}}var O=function(t,e,n,desc){var o,r=arguments.length,l=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(l=(r<3?o(l):r>3?o(e,n,l):o(e,n))||l);return r>3&&l&&Object.defineProperty(e,n,l),l},m=function(t){Object(l.a)(n,t);var e=y(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"style",get:function(){return{minHeight:"".concat(this.persistentMinHeight,"px")}}}]),n}(f.f);O([Object(f.d)({required:!0,type:Boolean})],m.prototype,"active",void 0),O([Object(f.d)({default:1400,type:Number})],m.prototype,"persistentMinHeight",void 0),O([Object(f.d)({type:Boolean})],m.prototype,"absolute",void 0);var S=m=O([Object(f.a)({components:{Loader:v.a}})],m),P=(n(1270),n(6)),component=Object(P.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.style},[n("div",{staticClass:"cont-loader",class:{"cont-loader--absolute":t.absolute}},[n("loader",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"cont-loader__loading",attrs:{active:t.active,size:"medium"}})],1),t._t("default")],2)}),[],!1,null,"3667e74d",null);e.a=component.exports},1270:function(t,e,n){"use strict";n(1254)},1271:function(t,e,n){var o=n(18)((function(i){return i[1]}));o.push([t.i,".cont-loader__loading[data-v-3667e74d]{margin-top:80px}.cont-loader--absolute[data-v-3667e74d]{position:absolute;left:50%}",""]),t.exports=o},1597:function(t,e,n){var content=n(2163);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("14e2d29d",content,!0,{sourceMap:!1})},2162:function(t,e,n){"use strict";n(1597)},2163:function(t,e,n){var o=n(18)((function(i){return i[1]}));o.push([t.i,".shopInShop-index{position:relative}",""]),t.exports=o},2568:function(t,e,n){"use strict";n.r(e);n(15),n(26),n(28),n(25),n(30);var o=n(42),r=n(14),l=n(35),c=n(2),h=n(5),d=n(10),f=n(8),v=n(9),y=n(3),O=n(7),m=(n(49),n(12),n(39),n(45),n(37),n(69),n(62),n(38)),S=n(0),P=n(1289),C=n(265),k=n(1317),$=n.n(k),I=n(267),j=n.n(I),B=n(36),x=n.n(B),_=n(1323),w=n(1414),E=n(1583),R=n(1256),L=n(1324),F=n(65),M=n(1296),N=n(1325),T=n(33),A=n(450),U=n(1268),D=n(1262),V=n(443),G=n(271),K=n(270);function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Q(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(v.a)(this,n)}}var J=function(t,e,n,desc){var o,r=arguments.length,l=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(O.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(l=(r<3?o(l):r>3?o(e,n,l):o(e,n))||l);return r>3&&l&&Object.defineProperty(e,n,l),l},z=function(t){Object(f.a)(c,t);var e,n=W(c);function c(){var t;return Object(h.a)(this,c),(t=n.apply(this,arguments)).itemsOnPageOnLoad=0,t.isNextButtonClicked=!1,t.loadAllFilters=!1,t.ITEMS_ON_PAGE=24,t.isGetProductError=!1,t}return Object(d.a)(c,[{key:"callMarxyEvent",value:function(){var t,e,n,o,r;if(this.shopInShop){var l=null!==(t=null===(e=this.shopInShop)||void 0===e||null===(n=e.productCollection)||void 0===n?void 0:n.breadcrumbs)&&void 0!==t?t:[],c=null!==(o=null===(r=l[l.length-1])||void 0===r?void 0:r.url)&&void 0!==o?o:this.$route.path,h={categoriesList:l.map((function(t){return t.title})),categoryId:null,categoryTitle:this.shopInShop.title,categoryUrl:c};this.$nuxt.$emit("categoryId-event",h)}}},{key:"onChangeRouter",value:function(t,e){var n=this;this.$nextTick((function(){(null==e?void 0:e.name)!==T.a.brand.name&&(null==e?void 0:e.name)!==T.a.partner.name&&(null==e?void 0:e.name)!==T.a.author.name&&(null==e?void 0:e.name)!==T.a.licence.name||(n.itemsOnPageOnLoad=n.ITEMS_ON_PAGE),n.refreshObserver()}))}},{key:"shopInShop",get:function(){var t=this,e=Q(Q({},this.getShopInShopBase),this.getShopInShop);if(null!=e&&e.productCollection){var n,o,r=[].concat(Object(l.a)(this.isBrandSis?[{title:this.$t("sis.breadcrumbs_brands"),titleFull:this.$t("sis.breadcrumbs_brands"),url:"/".concat(this.$t("sis.breadcrumbs_brands_url"))}]:[]),[{title:e.title,titleFull:e.title,url:this.$route.path}],Object(l.a)((null!==(n=null==e||null===(o=e.productCollection)||void 0===o?void 0:o.breadcrumbs)&&void 0!==n?n:[]).map((function(e){return Q(Q({},e),{},{url:"".concat(t.$route.path,"?category=").concat(e.url)})}))));return Q(Q({},e),{},{productCollection:Q(Q({},e.productCollection),{},{breadcrumbs:r}),titleFull:e.title})}return e}},{key:"isBrandSis",get:function(){var t;return(null===(t=this.$route)||void 0===t?void 0:t.name)===T.a.brand.name}},{key:"isPartnerSis",get:function(){var t;return(null===(t=this.$route)||void 0===t?void 0:t.name)===T.a.partner.name}},{key:"isLicenceSis",get:function(){var t;return(null===(t=this.$route)||void 0===t?void 0:t.name)===T.a.licence.name}},{key:"isAuthorSis",get:function(){var t;return(null===(t=this.$route)||void 0===t?void 0:t.name)===T.a.author.name}},{key:"isWinterEdition",get:function(){return Object(K.a)(this.$shopConfig.webConfig)}},{key:"query",get:function(){var t,e,n,o,r=Q({},this.$route.query.category&&{categoryUrl:this.$route.query.category});return this.isAuthorSis||this.isLicenceSis?Q(Q({},r),{},{parameter:{id:this.isAuthorSis?"MP_AUTHOR":"LICENCE",urlValue:this.isAuthorSis?null===(e=this.$route.params)||void 0===e?void 0:e.authorId:null===(n=this.$route.params)||void 0===n?void 0:n.licenceId}}):this.isBrandSis?Q(Q({},r),{},{brandUrl:null===(o=this.$route.params)||void 0===o?void 0:o.brandId}):Q(Q({},r),{},{partnerUrl:null===(t=this.$route.params)||void 0===t?void 0:t.partnerUrl})}},{key:"isFirstPagePreload",get:function(){return this.itemsOnPageOnLoad===this.preloadProductsCount&&1===this.pagination.currentPage}},{key:"isNotFoundCategory",get:function(){return null===this.getShopInShopBase}},{key:"productCollection",get:function(){var t;return null===(t=this.shopInShop)||void 0===t?void 0:t.productCollection}},{key:"itemsOnPage",get:function(){return this.ITEMS_ON_PAGE}},{key:"preloadProductsCount",get:function(){return Number(this.$shopConfig.webConfig.sisProductsCountSsr)||12}},{key:"preloadProducts",get:function(){var t,e;return null!==(t=null===(e=this.$shopConfig.featureFlags)||void 0===e?void 0:e.sisProductsSsr)&&void 0!==t&&t}},{key:"loadedItemsCount",get:function(){var t,e,n;return null!==(t=null===(e=this.productCollection)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.length)&&void 0!==t?t:0}},{key:"isCustomCanonicalUrl",get:function(){return null!==this.$route.name&&!!this.$route.fullPath.split("?")[1]}},{key:"includeBonusSets",get:function(){var t;return null!==(t=Object(V.a)("categoryPageBonusSet",this.$shopConfig.featureFlags))&&void 0!==t&&t}},{key:"sisQueryVariables",get:function(){var t,e;return Q(Q(Q({query:this.query,isBrandSis:this.isBrandSis,estimatedDeliveryType:Object(A.a)(this.$shopConfig),filters:Object(R.f)(this.$route.query),includeBonusSets:this.includeBonusSets},(null===(t=this.$route.query)||void 0===t?void 0:t.category)&&{categoryUrlKey:null!==(e=this.$route.query.category)&&void 0!==e?e:""}),this.productSorting),{},{pagination:{limit:this.itemsOnPageOnLoad,offset:0}})}},{key:"isFirstProductsPreload",get:function(){return this.itemsOnPageOnLoad<this.itemsOnPage}},{key:"isPrefetchOn",get:function(){return"1"!==this.$shopConfig.webConfig.nxtIsPreloadOnScrollDisabled||this.isFirstProductsPreload}},{key:"productSorting",get:function(){return this.$route.query.o&&{productSorting:Object(L.a)(this.$route.query.o)}}},{key:"pagination",get:function(){var t,e,n,o,r,l,c,h,d=this.itemsOnPage,f=parseInt(null!==(t=null===(e=this.$route)||void 0===e||null===(n=e.query)||void 0===n?void 0:n.pagination)&&void 0!==t?t:"1"),v=f>=0?f:0,y=null!==(o=null===(r=this.productCollection)||void 0===r?void 0:r.itemsTotalCount)&&void 0!==o?o:0,O=$()(y/d);return{currentPage:v,itemsOnPage:d,loadedItemsCount:null!==(l=null===(c=this.productCollection)||void 0===c||null===(h=c.items)||void 0===h?void 0:h.length)&&void 0!==l?l:0,totalPages:O,initLoadCount:this.preloadProductsCount,isNextButtonClicked:this.isNextButtonClicked}}},{key:"updated",value:function(){this.refreshObserver()}},{key:"mounted",value:function(){this.setUi({mpPanelTranslationKey:"common.msg_partner_notification"}),sessionStorage.getItem("activeProduct")&&(this.itemsOnPageOnLoad=this.itemsOnPage),this.$apollo.queries.getShopInShop.setOptions({fetchPolicy:"cache-and-network"})}},{key:"destroyed",value:function(){this.setUi({mpPanelTranslationKey:null}),this.observer&&this.observer.disconnect()}},{key:"loadMoreOnScroll",value:function(){var t=Q(Q({},this.sisQueryVariables),{},{pagination:{limit:this.itemsOnPageOnLoad,offset:this.pagination.currentPage*this.ITEMS_ON_PAGE}});this.$apollo.query({query:E.a,variables:t})}},{key:"loadMoreOnClick",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isNextButtonClicked=!0,t.next=3,this.$router.replace({path:this.$route.path,query:Object(M.a)(this.$route.query,{pagination:String(this.pagination.currentPage+1)})});case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"onPageChange",value:function(t){this.isNextButtonClicked=!1,this.$router.push({path:this.$route.path,query:Object(M.a)(this.$route.query,{pagination:String(t)})})}},{key:"refreshObserver",value:function(){var t,e=null===(t=this.shopInShopPage)||void 0===t?void 0:t.$refs.paginationElement;if(e){this.observer&&this.observer.unobserve(e);var n=this.itemsOnPageOnLoad<this.pagination.itemsOnPage?{rootMargin:"800px"}:{rootMargin:"450px"};this.observer=new IntersectionObserver(this.onStartingIntersection,n),e&&this.isPrefetchOn&&this.observer.observe(e)}}},{key:"onStartingIntersection",value:function(t){var e=Object(o.a)(t,1)[0],n=this.pagination.totalPages===this.pagination.currentPage&&this.pagination.loadedItemsCount!==this.preloadProductsCount;!e.isIntersecting||this.$apollo.loading||n||0===this.pagination.totalPages||(this.itemsOnPageOnLoad<this.pagination.itemsOnPage?(this.itemsOnPageOnLoad=this.pagination.itemsOnPage,this.refreshObserver()):this.isPrefetchOn&&this.loadMoreOnScroll())}},{key:"setActiveProduct",value:function(t){sessionStorage.setItem("activeProduct",t.id)}},{key:"clearActiveProduct",value:function(){sessionStorage.removeItem("activeProduct")}},{key:"setUi",value:function(t){this.$apollo.mutate({mutation:F.a,variables:{ui:t}})}},{key:"onVisibilityChange",value:function(t){var e=this;t&&this.$nextTick((function(){e.refreshObserver()}))}},{key:"enabledFeedback",get:function(){return"1"===x.a.get("search_feedback")&&(!!this.$route.query.s&&(!this.isFirstProductsPreload&&!this.$apollo.queries.getShopInShop.loading&&this.pagination.currentPage<=1))}}]),c}(m.Vue);J([Object(S.e)()],z.prototype,"shopInShopPage",void 0),J([Object(S.g)("getShopInShopBase",{deep:!0})],z.prototype,"callMarxyEvent",null),J([Object(S.g)("$route",{deep:!0,immediate:!0})],z.prototype,"onChangeRouter",null);var X=z=J([Object(m.Component)({apollo:{getShopInShopBase:{query:E.b,variables:function(){var t,e;return Q({query:this.query,isBrandSis:this.isBrandSis},(null===(t=this.$route.query)||void 0===t?void 0:t.category)&&{categoryUrlKey:null!==(e=this.$route.query.category)&&void 0!==e?e:""})},update:function(data){var t,e,n;return null!==(t=data.getShopInShopBase)&&void 0!==t&&t.title||null!==(e=data.getShopInShopBase)&&void 0!==e&&null!==(n=e.productCollection)&&void 0!==n&&n.itemsTotalCount?data.getShopInShopBase:null}},getFiltersCollection:{errorPolicy:"all",query:_.a,fetchPolicy:"cache-and-network",skip:function(){var t;return!(null!==(t=this.$shopConfig)&&void 0!==t&&t.isBot,1)},variables:function(){var t,e,n=this.$route,o=Object(R.f)(n.query);return Q(Q(Q({},this.query),(null===(t=this.$route.query)||void 0===t?void 0:t.category)&&{categoryUrlKey:null!==(e=this.$route.query.category)&&void 0!==e?e:""}),{},{allFilters:!0,filters:o})}},getShopInShop:{errorPolicy:"all",query:E.a,result:function(t){t.data&&(Object(G.l)(this)(this.shopInShop),this.$Progress.finish())},skip:function(){var t;return!(this.preloadProducts||null!==(t=this.$shopConfig)&&void 0!==t&&t.isBot,1)},update:function(data){var t,e,n=data.getShopInShop,o=this.getShopInShop;if(this.$apollo.queries.getShopInShop.loading=!1,!n)return null!=o?o:null;if(Object(G.l)(this)(data.getShopInShop),1===this.pagination.currentPage&&(this.isNextButtonClicked=!1),!this.isNextButtonClicked||j()(n,o))return n;var r=(null===(t=o.productCollection)||void 0===t?void 0:t.items)||[],l=(null==n||null===(e=n.productCollection)||void 0===e?void 0:e.items)||[],c=Object(N.a)(r,l);return Q(Q({},n),{},{productCollection:Q(Q({},n.productCollection),{},{items:c})})},variables:function(){return Q(Q({},this.sisQueryVariables),{},{pagination:Q(Q({},this.isFirstPagePreload?{prefetchCount:this.preloadProductsCount}:{limit:this.itemsOnPageOnLoad>0?this.itemsOnPageOnLoad:this.preloadProductsCount}),{},{offset:(this.pagination.currentPage-1)*this.ITEMS_ON_PAGE})})}},getShopInShopBestSeller:{query:E.c,variables:function(){var t=this.$route,e=Object(R.f)(t.query);return{query:this.query,filters:e}}}},components:{CategoryPage:w.a,Container:C.a,ContainerLoading:U.a,NotFoundErrorHandler:D.a,SnowflakesListSide:P.a},head:function(){return{title:"".concat(this.shopInShop.title," | ").concat(this.$shopConfig.webConfig.title)}}})],z),Y=(n(2162),n(6)),component=Object(Y.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container",[n("div",{staticClass:"shopInShop-index"},[n("container-loading",{attrs:{active:!t.getShopInShopBase}},[t.isNotFoundCategory?n("not-found-error-handler"):t._e(),t.getShopInShopBase?n("category-page",{ref:"shopInShopPage",attrs:{category:t.shopInShop,"filter-collection":t.getFiltersCollection,"is-loading":t.$apollo.queries.getShopInShop.loading||!t.getShopInShop,"best-seller-loading":t.$apollo.queries.getShopInShopBestSeller.loading||!t.getShopInShopBestSeller,pagination:t.pagination,"sis-query":t.query,"enabled-feedback":t.enabledFeedback},on:{"load-more":t.loadMoreOnClick,"on-page-change":t.onPageChange,"set-active-product":t.setActiveProduct,"clear-active-product":t.clearActiveProduct,"on-visibility-change":t.onVisibilityChange}}):t._e()],1),t.isWinterEdition?n("snowflakes-list-side",{attrs:{"is-right":!0}}):t._e(),t.isWinterEdition?n("snowflakes-list-side",{attrs:{"is-left":!0}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports}}]);
//# sourceMappingURL=e1e7c7f.531.js.map